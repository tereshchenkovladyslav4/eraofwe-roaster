<div class="total_header page-breadcrumb margin-mb-0 pmb-0 pb-0">
    <div class="row">
        <div class="col-12">
            <div class="d-md-flex flex-column order-fff w-100">
                <div class="col-12 px-md-0 page-breadcrumb__nav">
                    <div class="col-lg-6 col-md-12 pull-left mr-auto pl-0 pr-0">
                        <nav role="navigation" aria-labelledby="title-breadcrumb-1" class="breadcrumb1 pt-2">
                            <span id="title-breadcrumb-1" class="sr-only"></span>
                            <ul class="bread-nav">
                                <li class="b-cum">
                                    <a class="b-cum" routerLink="/">Home</a
                                    ><span class="padl-r" aria-hidden="true"
                                        ><img class="group-img" src="/assets/images/arrow-1.png" alt=""
                                    /></span>
                                </li>
                                <!-- <li class="b-cum">
                                    <a class="b-cum" routerLink="/ordermanagement/">Order management</a><span class="padl-r" aria-hidden="true"><img class="group-img"
                                            src="/assets/images/arrow-1.png" alt=""></span>
                                </li> -->
                                <li class="b-cum">
                                    <a class="b-cum" routerLink="/ordermanagement/microroaster-orders"
                                        >Micro roaster orders</a
                                    ><span class="padl-r" aria-hidden="true">
                                        <img class="group-img" src="/assets/images/arrow-1.png" alt="" />
                                    </span>
                                </li>
                                <li class="b-cum c-pink">Order {{ bookId }}</li>
                            </ul>
                        </nav>
                    </div>

                    <div class="col-lg-6 col-md-12 pull-right ml-auto d-none d-md-block pl-0 pr-0">
                        <span class="pull-right ml-auto order-placed-text">
                            Order placed :
                            <span class="date-text">{{ bookDetailService.created_date | date: 'd MMM, y' }}</span>
                        </span>
                    </div>
                </div>
                <section class="container create-role-sec mt-2 px-md-0 mb-15">
                    <div class="col-lg-12 col-md-12 col-sm-12 pr-0">
                        <div class="row">
                            <div class="col-md-6 pl-0 pr-0">
                                <div class="order__id d-flex align-items-center">
                                    Order #{{ bookId }}
                                    <span *ngIf="!sampleMode" class="booked booked--orange ml-2">Booked</span>
                                    <span *ngIf="sampleMode" class="booked booked--orange ml-2">Sample</span>
                                    <!-- <span class="standard__delivery">
                                        <span class="fnt-muli"><img src="assets/images/shipping.png" alt=""> Standard Delivery  (3 - 5days)</span>
                                    </span> -->
                                </div>
                            </div>
                            <div class="btn-div col-md-6 pl-0 pr-3 d-md-block d-none">
                                <!-- *ngIf="this.globals.permissions['cart-management'] && this.globals.permissions['cart-management'].manage" -->
                                <button type="submit" class="btn pull-right ord-invoice-butn" (click)="showInvoice()">
                                    Order Invoice
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="in-order mt-3" *ngIf="orderSampleTimeline">
                        <div class="row">
                            <div class="col-12 col-md-12">
                                <h4 class="order-txt fnt-play mb-4 mb-md-2">
                                    {{ sampleValueToShow }}
                                </h4>
                                <div class="transit-scoll overflow-hidden overflow-md-auto mt-md-4">
                                    <div class="transit-maxwidth main-order-tracking-mbVesrion">
                                        <div class="w-100 d-flex flex-column flex-md-row">
                                            <div class="order-tracking" id="placedDivSample">
                                                <span class="is-complete"></span>
                                                <div
                                                    class="text-md-center order-tracking__mb-text mt-order-0 ml-2 ml-md-0"
                                                >
                                                    <p
                                                        class="order-status mt-md-2 mb-1"
                                                        (click)="orderPlaceSample()"
                                                        #orderPlacedSample
                                                        style="color: #232334; font-weight: bold"
                                                    >
                                                        Order placed
                                                    </p>
                                                    <!-- <p class="order-date mb-0 t">Estate + facilitator Notified </p> -->
                                                </div>
                                            </div>
                                            <div class="order-tracking completed" id="confirmDivSample">
                                                <span class="is-complete"></span>
                                                <div class="text-md-center order-tracking__mb-text ml-2 ml-md-0">
                                                    <p
                                                        class="order-status mt-md-2"
                                                        (click)="orderConfirmSample()"
                                                        #orderConfirmedSample
                                                    >
                                                        Order Confirmed
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="order-tracking completed" id="paymentDivSample">
                                                <span class="is-complete"></span>
                                                <div class="text-md-center order-tracking__mb-text ml-2 ml-md-0">
                                                    <p
                                                        class="order-status mt-md-2"
                                                        (click)="paySample()"
                                                        #paymentSample
                                                    >
                                                        Payment
                                                    </p>
                                                </div>
                                            </div>
                                            <div class="order-tracking completed" id="shippmentDivSample">
                                                <span class="is-complete"></span>
                                                <div class="text-md-center order-tracking__mb-text ml-2 ml-md-0">
                                                    <p
                                                        class="order-status mt-md-2 mb-1"
                                                        (click)="shipmentStatusSample()"
                                                        #shippmentSample
                                                    >
                                                        Shipped
                                                    </p>
                                                    <!-- <p class="order-date mb-0" *ngIf="shippmentReport">20 Feb 2020</p> -->
                                                </div>
                                            </div>
                                            <div class="order-tracking completed" id="receivedDivSample">
                                                <span class="is-complete"></span>
                                                <div class="text-md-center order-tracking__mb-text ml-2 ml-md-0">
                                                    <p
                                                        class="order-status mt-md-2 mb-0"
                                                        (click)="receivedStatusSample()"
                                                        #receivedSample
                                                    >
                                                        Recieved
                                                    </p>
                                                    <p class="order-date mb-0">by customer</p>
                                                </div>
                                            </div>
                                            <!-- <div class="order-tracking completed" id="gradedDivSample">
                                                <span class="is-complete"></span>
                                                <div class="text-md-center order-tracking__mb-text ml-2 ml-md-0">
                                                    <p class="order-status  mt-md-2 mb-0" (click)="gradedStatusSample()" #gradedSample>Graded by Roaster</p>
                                                    <label class="order-datecolor mb-0" *ngIf="uploadReportSample" (click)="upload.click()">Upload report</label>
                                                    <input hidden type="file" #upload />
                                                    <p class="order-datecolor mb-0" *ngIf="gradedReportSample">View report
                                                    </p>
                                                </div>
                                            </div> -->
                                        </div>
                                    </div>
                                </div>

                                <div class="btn-div col-md-6 pl-0 pr-0 d-inline-block d-md-none mb-2">
                                    <!-- *ngIf="this.globals.permissions['cart-management'] && this.globals.permissions['cart-management'].manage" -->
                                    <button
                                        type="submit"
                                        class="btn pull-right ord-invoice-butn w-100 text-center"
                                        (click)="showInvoice()"
                                    >
                                        Order Invoice
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Recieved Block -->
                    <div class="in-order mt-5 confirm-shippment" *ngIf="receivedOrderShow">
                        <div class="row">
                            <div class="col-lg-9 col-md-8 col-sm-12 d-flex">
                                <div class="col-md-1 main pl-4">
                                    <span class="circle-image">
                                        <img src="assets/images/cricle-active.png" />
                                    </span>
                                </div>
                                <div class="col-md-11 pl-0">
                                    <div class="confirm-grade order-mr pt-2">Recieved by the Customer</div>
                                    <div class="confirm-grade order-mr">
                                        The order has been marked as recieved by the mirco roaster!
                                    </div>
                                    <button
                                        type="submit"
                                        class="cancel-order btn mt-3"
                                        [routerLink]="bookId | orderRatingLink: orgType"
                                    >
                                        Leave a feedback!
                                    </button>
                                </div>
                                <!-- <div class="col-lg-3 col-md-4 col-sm-12 ship-pl">
									<button type="submit" class="yes-order btn mt-3">Buy it again </button>
									<button type="submit" class="cancel-order btn mt-3">Browse other estates </button>
								</div> -->
                            </div>
                        </div>
                    </div>
                    <!-- Waiting for Confirmation -->
                    <div class="in-order mt-5 confirm-shippment" *ngIf="waitingConfirmShow">
                        <div class="row">
                            <div class="col-lg-9 col-md-8 col-sm-12 d-flex">
                                <!-- <div class="col-md-1 main pl-4">
                                        <span class="circle-image">
                                            <img src="assets/images/cricle-active.png">
                                        </span>
                                    </div> -->
                                <div class="col-md-11 pl-0">
                                    <h4 class="order-txt fnt-play">Waiting for a confirmation from Micro-Roaster</h4>
                                    <div class="confirm-grade order-mr pt-2">
                                        The micro-roaster will review the order received and confirm the order.
                                    </div>
                                    <button
                                        type="submit"
                                        class="cancel-order btn mt-3"
                                        [routerLink]="bookId | orderRatingLink: orgType"
                                    >
                                        Leave a feedback!
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>
</div>
<div class="row" *ngIf="paymentStatusDiv">
    <div class="col-lg-12">
        <div class="customer__amount">
            <div class="w-100 clearfix">
                <div class="pull-left pt-3 text-data">
                    When you receive the due amount from the customer, mark as payment done here.
                </div>
                <div class="pull-right">
                    <!-- *ngIf="this.globals.permissions['cart-management'] && this.globals.permissions['cart-management'].manage" -->
                    <button class="btn payment__recieved fnt-muli mr-2" (click)="verifyPayment()">
                        Payment Received
                    </button>
                    <button class="btn payment__after__delivery fnt-muli ml-1" (click)="verifyPaymentAfterDelivery()">
                        Payment after delivery
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row" *ngIf="paymentCompletedDiv">
    <div class="col-lg-12">
        <div class="customer__amount">
            <div class="w-100 clearfix">
                <div class="pull-left pt-3 text-data col-6">
                    When the order is ready to be shipped , please update the tracking link and the shipping date for
                    the customers to keep a track.
                </div>
                <div class="pull-right">
                    <input
                        type="text"
                        class="track-link mr-2"
                        id="track-link"
                        placeholder="Enter tracking link"
                        [(ngModel)]="bookDetailService.shipmentLink"
                        [ngModelOptions]="{ standalone: true }"
                    />
                    <p-calendar
                        class="year mr-2"
                        [(ngModel)]="bookDetailService.date6"
                        [monthNavigator]="true"
                        [yearNavigator]="true"
                        dateFormat="yy-mm-dd"
                        yearRange="2000:2030"
                        inputId="navigators"
                        placeholder="Estimated arrival date"
                    ></p-calendar>
                    <button class="btn save-btn fnt-muli mr-2" *ngIf="savemode" (click)="save()">Save</button>
                    <button class="btn save-btn fnt-muli mr-2" *ngIf="editmode" (click)="edit()">Edit</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="order-tab-fff d-lg-flex bg-none mt-3">
            <div class="mixups-tabs col-lg-8 col-md-12 mb-md-3 mb-lg-0 pl-lg-0 mixups-tabs--pd0">
                <div class="border-ebebeb h-100">
                    <ul class="nav nav-pills mb-3 w-100" id="pills-tab" role="tablist">
                        <li class="nav-item">
                            <a
                                class="nav-link active"
                                id="pills-home-tab"
                                data-toggle="pill"
                                href="#pills-home"
                                role="tab"
                                aria-controls="pills-home"
                                aria-selected="true"
                                >Order details</a
                            >
                        </li>
                        <li class="nav-item">
                            <a
                                class="nav-link"
                                id="pills-contact-tab"
                                data-toggle="pill"
                                href="#pills-contact"
                                role="tab"
                                aria-controls="pills-contact"
                                aria-selected="false"
                                >Estate Info</a
                            >
                        </li>
                        <!-- *ngIf="this.globals.permissions['cart-management'] && this.globals.permissions['cart-management'].manage" -->
                        <li class="pull-right ml-auto problem-text" id="have-a-problem-web">
                            <button
                                type="button"
                                class="btn problem-btn"
                                [routerLink]="['/dispute-system/order-chat', bookId]"
                                [queryParams]="{ orderType: 'MR' }"
                            >
                                Have a problem?
                            </button>
                        </li>
                    </ul>
                    <!-- <div class="pull-right ml-auto problem-text" id="have-a-problem-mobile">
								<button type="button" class="btn problem-btn" routerLink="/ordermanagement/order-support">Have a
									problem?</button>
							</div> -->

                    <div class="tab-content mt-md-5" id="pills-tabContent">
                        <div
                            class="tab-pane fade show active"
                            id="pills-home"
                            role="tabpanel"
                            aria-labelledby="pills-home-tab"
                        >
                            <app-booked-details></app-booked-details>
                        </div>

                        <div
                            class="tab-pane fade"
                            id="pills-contact"
                            role="tabpanel"
                            aria-labelledby="pills-contact-tab"
                        >
                            <div class="row">
                                <app-booked-notes></app-booked-notes>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-12 mixups-tabs--pd0 pr-lg-0">
                <div class="shipping-div shipping-div--mbVesrion bg-shipping">
                    <div class="shipping-div__info">
                        <div class="d-flex">
                            <div class="pull-left delivery__addr">Delivery address</div>
                            <!-- <div class="pull-right ml-auto edit-text"><img class="edit-icon" src="assets/images/shape-edit.png" alt="Edit"> Edit</div> -->
                        </div>
                        <div class="d-flex mt-1 addr-text" *ngIf="bookDetailService.delivery_address">
                            {{ bookDetailService.delivery_address.address_line1 }},
                            {{ bookDetailService.delivery_address.address_line2 }},
                            {{ bookDetailService.delivery_address.zipcode }} -
                            {{ bookDetailService.delivery_address.state }},
                            {{ bookDetailService.getCountry(bookDetailService.delivery_address.country) }}
                        </div>
                        <div class="d-flex mt-3">
                            <img class="img-logo" src="assets/images/google-image.png" alt="Map" />
                        </div>
                    </div>
                    <div class="d-none d-md-block">
                        <div class="d-flex mt-4">
                            <div class="pull-left customer__details">Micro-roastery Details</div>
                            <div class="pull-right ml-auto view-details">view details</div>
                        </div>

                        <div class="d-flex mt-3 border-div">
                            <div class="p-0">
                                <!-- <img class="img-estate" src="assets/images/stakeholder1.png" alt="User"> -->
                                <span *ngIf="bookDetailService.mrProfileDetails">
                                    <img
                                        class="img-estate"
                                        [src]="bookDetailService.mrProfileDetails.company_image_thumbnail_url"
                                        alt=""
                                    />
                                </span>
                                <span *ngIf="bookDetailService.mrProfileDetails == ''">
                                    <img class="img-estate" src="assets/images/stakeholder1.png" alt="" />
                                </span>
                            </div>
                            <div class="pull-left">
                                <ul class="details-list p-0 ml-2 ml-md-3">
                                    <li class="estate-name" *ngIf="bookDetailService.mrProfileDetails">
                                        {{
                                            bookDetailService.mrProfileDetails.name
                                                ? bookDetailService.mrProfileDetails.name
                                                : ''
                                        }}
                                    </li>
                                    <li class="estate-number pt-1">
                                        <span class="cursor-pointer" [routerLink]="orgType | reviewLink: bookId">
                                            <img class="" src="assets/images/star-1.png" alt="User" />
                                            <span class="star-no pl-1" *ngIf="bookDetailService.mrProfileDetails">
                                                {{
                                                    bookDetailService.mrProfileDetails.rating
                                                        ? bookDetailService.mrProfileDetails.rating
                                                        : '0'
                                                }}</span
                                            >
                                        </span>
                                    </li>
                                </ul>
                            </div>
                            <div class="pull-right ml-auto">
                                <div class="">
                                    <!-- *ngIf="this.globals.permissions['cart-management'] && this.globals.permissions['cart-management'].manage" -->
                                    <span class="bg-msg">
                                        <img
                                            class="message-icon"
                                            src="assets/images/message-icon.svg"
                                            alt="Message"
                                        /><span class="customer-message pl-2">Message</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- note-->
                <div class="shipping-div shipping-div--mbVesrion bg-shipping mt-4">
                    <div class="shipping-div__info">
                        <p class="delivery__addr">Notes</p>

                        <p class="fnt-14 fnt-muli fnt-400 text-clr588">
                            Add special instructions or comments about the order for your team members
                        </p>

                        <!-- <div class="farm-input">
                  <input type="text" placeholder="Add a comment">
              </div>

              <button class="note-btn mt-3"> Add a note </button> -->

                        <div *ngIf="noteList && noteList.length > 0" class="mt-3 border-div">
                            <div *ngFor="let item of noteList" class="d-flex">
                                <div class="p-0">
                                    <img class="pl-2 img-procured" [src]="item.dp_thumb" />
                                </div>
                                <div class="pull-left">
                                    <ul class="details-list p-0 ml-2 ml-md-3">
                                        <li class="estate-name fnt-14 fnt-md-16 fnt-muli fnt-700 text-clr334">
                                            {{ item.comment }}
                                        </li>
                                        <li class="estate-number pt-1 fnt-14 fnt-muli fnt-600 text-clr588">
                                            Posted by {{ item.first_name }} {{ item.last_name }}
                                            {{ item.created_at | date: 'dd MMM' }}
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="form-input">
                            <div class="input-group">
                                <input
                                    type="text"
                                    placeholder="Add a comment"
                                    class="form-control input-group-right-border"
                                    [(ngModel)]="addNotes"
                                    name="stock"
                                />
                                <div class="input-group-append crates-width">
                                    <span
                                        name="Year"
                                        required=""
                                        (click)="addNote()"
                                        class="form-control select-region select-form-group-dropdown select-region-local select-arrow-no"
                                    >
                                        <option value="Add note">Add note</option>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--End note -->
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="recent-fff">
            <div class="col-lg-12 bg-shipping">
                <div class="w-100 col-lg-6 col-md-12 recent-activity-content">
                    <p class="w-100 recent-title fnt-play mb-2 mb-md-3">Recent Activity</p>
                    <p class="w-100 activity-date mb-4">
                        Tuesday,4th Jan 2020
                        <img class="pl-2" src="assets/images/active.png" />
                    </p>
                    <div
                        class="d-flex mt-4 col-12 border-div flex-column flex-md-row"
                        *ngFor="let activity of bookDetailService.recentactivityarray"
                    >
                        <div class="d-none d-md-inline-block p-0">
                            <img class="img-estate" src="assets/images/activity1.png" alt="User" />
                            <!-- <p class="timing">12:44pm</p> -->
                        </div>
                        <div class="pull-left">
                            <ul class="details-list p-0">
                                <li class="list-name">{{ activity.user_first_name }} {{ activity.user_last_name }}</li>
                                <li class="list-user mb-2 pt-1">
                                    <span *ngIf="activity.organization_type == 'mr'">Micro Roaster</span>
                                    <span *ngIf="activity.organization_type == 'ro'">Roaster</span>
                                </li>
                                <li class="confirmation-status">
                                    Order confirmed by the
                                    <span *ngIf="activity.organization_type == 'mr'">Micro Roaster</span>
                                    <span *ngIf="activity.organization_type == 'ro'">Roaster</span>
                                </li>
                            </ul>
                        </div>
                        <div class="pull-right ml-auto list-time d-none d-md-inline-block">
                            {{ activity.created_at | date: 'shortTime' }}
                        </div>
                    </div>
                    <!-- <div class="d-flex col-12 mt-3  border-div flex-column flex-md-row">
                        <div class="d-none d-md-inline-block p-0">
                            <img class="img-estate" src="assets/images/stakeholder2.png" alt="User">
                            <p class="timing">01:30pm</p>
                        </div>
                        <div class="pull-left">
                            <ul class="details-list p-0 ">
                                <li class="list-name">
                                    <p class="mb-0">Kevin Bailey</p>
                                </li>
                                <li class="list-user mb-2 pt-1">
                                    Coffee Estate
                                </li>
                                <li class="confirmation-status">
                                    Order confirmed by the Estate
                                </li>
                               
                            </ul>
                        </div>
                        <div class="pull-right ml-auto list-time d-none d-md-inline-block">1:30pm</div>

                    </div> -->
                    <div class="w-100 mt-4 mb-2 d-block d-md-none">
                        <button type="button" class="btn cancel-order-btn cancel-order-btn--mobile w-100 text-center">
                            Cancel order
                        </button>
                    </div>
                </div>
                <div class="col-lg-6 col-12"></div>
            </div>
            <div class="w-100 mt-5 pb-5 d-none d-md-inline-block">
                <!-- *ngIf="this.globals.permissions['cart-management'] && this.globals.permissions['cart-management'].manage" -->
                <button type="button" class="btn cancel-order-btn">Cancel order</button>
            </div>
            <div class="w-100 chat-div">
                <button
                    type="button"
                    class="btn col-md-4 pull-right ml-auto chat-btn stricky-order"
                    [routerLink]="['/dispute-system/order-chat', bookId]"
                    [queryParams]="{ orderType: 'MR' }"
                >
                    Order #{{ bookId }} chat <span class="chat-indicator"> &#x25CF;</span
                    ><img class="pull-right ml-auto" src="assets/images/back-arrow.png" />
                </button>
            </div>
        </div>
    </div>
</div>
