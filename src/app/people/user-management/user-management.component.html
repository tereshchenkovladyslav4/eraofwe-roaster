<div class="header-sewn">
    <h1 class="hello-txt">User Management</h1>
</div>

<!-- <div class="page-breadcrumb">
  <div class="row">
    <div class="col-12 d-flex no-block align-items-center">
      <div class="">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a class="b-cum" routerLink="/features/welcome-aboard">Home</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">
              User Management
            </li>
          </ol>
        </nav>
      </div> -->
<!-- <div class="ml-auto text-right"> 
                    <button type="submit" class="btn btn-succes create-role-btn">Create new role</button>
                </div> -->
<!-- </div>
  </div>
</div> -->
<div class="total-loader" *ngIf="userActive != 3">
    <!-- <img class="loader-gif-sub" src="/assets/images/loader.gif"> -->
    <div><img class="loader-gif web-loader" src="/assets/images/loader.gif">
        <img class="loader-gif mob-loader" src="/assets/images/coffeeloader-mobile.gif">
    </div>
</div>

<div class="bg-fff coffee-exp" *ngIf=" userActive == 3">
    <nav role="navigation" aria-labelledby="title-breadcrumb-1" class="breadcrumb1">
        <span id="title-breadcrumb-1" class="sr-only"></span>
        <ul class="bread-nav">
            <li class="b-cum">
                <a class="b-cum" routerLink="/features/welcome-aboard">{{appLanguage.home}}</a><span class="padl-r" aria-hidden="true"><img class="group-img" src="/assets/images/arrow-1.png" alt=""></span>
            </li>
            <li class="b-cum">
                <a class="b-cum" routerLink="/people/user-management">{{appLanguage.people}}</a><span class="padl-r" aria-hidden="true"><img class="group-img" src="/assets/images/arrow-1.png" alt=""></span>
            </li>

            <li class="b-cum c-pink">{{appLanguage.user_management}}
            </li>
            <div class="col-md-6 col-lg-4 pull-right search-div ">
                <input type="text" name="search" class="search-raised desk_view_user" [(ngModel)]="term" placeholder="Search by name, role.." />
            </div>

        </ul>
    </nav>
    <section class="user-title d-md-block d-none">
        <div class="col-lg-12 col-md-12 col-sm-12 p-0">
            <div class="row">
                <div class="d-inline page-title">{{appLanguage.user_management}}</div>
                <!-- <i class="pi pi-question-circle help" pTooltip="Please Click to see help" tooltipPosition="bottom" (click)="showModalDialog()"></i>
                <p-dialog header="What is Lorem Ipsum?" [(visible)]="displayModal" [modal]="true" [style]="{width: '50vw'}" [baseZIndex]="10000" [draggable]="false" [resizable]="false">
                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type
                        specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum
                        passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
                </p-dialog> -->
            </div>
        </div>
    </section>
    <div class="title-header d-inline desk_view_user">
        <div class="d-inline border-total status-div col-sm-6" [outsideClick]="true" (onShown)="toggleStatus();" (onHidden)="toggleStatus();" id="status_id" [popover]="allTemplate" placement="bottom" container="body" #pop="bs-popover">
            <p class="d-inline filter-text" *ngIf="termStatus == ''">{{appLanguage.status}}&nbsp;</p>
            <a class="pointer-item">
                <p class="d-inline filter" *ngIf="termStatus == ''">
                    &nbsp; <img src="{{ showVar ? 'assets/images/down-arrow.svg' : 'assets/images/user-down.svg'}}" />
                </p>
            </a>
            <a class="pointer-item">
                <p class="d-inline filter" *ngIf="termStatus != ''">
                    {{ termStatus }}&nbsp; <img src="{{ showVar ? 'assets/images/down-arrow.svg' : 'assets/images/user-down.svg'}}" />
                </p>
            </a>
        </div>
        &nbsp;&nbsp;
        <div class="d-inline border-total role-div col-sm-6" id="role_id" [outsideClick]="true" (onShown)="toggleRole();" (onHidden)="toggleRole();" [popover]="roleTemplate" placement="bottom" container="body" #pop2="bs-popover">
            <!-- <p class="d-inline">Role:</p><p class="d-inline filter"> All&nbsp;  <a data-toggle="popover-roles" data-placement="bottom"><img src="assets/images/active.png"></a></p> -->
            <p class="d-inline filter-text" *ngIf="termRole == ''">{{appLanguage.role}}&nbsp;</p>
            <a class="pointer-item">
                <p class="d-inline filter" *ngIf="termRole == ''">
                    &nbsp; <img src="{{ showRole ? 'assets/images/down-arrow.svg' : 'assets/images/user-down.svg'}}" />
                </p>
            </a>
            <a class="pointer-item">
                <p class="d-inline filter" *ngIf="termRole != ''">
                    {{ termRole }}&nbsp;<img src="{{ showRole ? 'assets/images/down-arrow.svg' : 'assets/images/user-down.svg'}}" />
                </p>
            </a>
        </div>
    </div>
    <div class="table-container desk_view_user">
        <div class="table-responsive">
            <table class="table">
                <thead class="table-header">
                    <tr class="header-row">
                        <th>
                            <label class="customcheckbox m-b-20">
                                                <input type="checkbox" id="mainCheckbox"  [checked]="isAllChecked()" (change)="checkAll($event)" />
                                                <span class="checkmark head-check"></span>
                                            </label>
                        </th>
                        <th scope="col">{{appLanguage.name}}</th>
                        <th scope="col">
                            {{appLanguage.last_login}}&nbsp; <img src="assets/images/combined-shape-user.png" />
                        </th>
                        <th scope="col">{{appLanguage.email}}</th>
                        <th scope="col">{{appLanguage.status}}</th>
                        <th scope="col" [popover]="roleTemplate" placement="bottom" [outsideClick]="true" container="body" #pop5="bs-popover">
                            <p class="d-inline">{{appLanguage.all_roles}}</p>
                            <a class="pointer-item">
                                <p class="d-inline filter" *ngIf="termRole == ''">
                                    &nbsp; <img src="assets/images/down-arrow.svg" /></p>
                            </a>
                            <a class="pointer-item">
                                <p class="d-inline filter" *ngIf="termRole != ''">
                                    &nbsp;<img src="assets/images/down-arrow.svg" /></p>
                            </a>
                        </th>
                        <th scope="col">{{appLanguage.actions}}</th>
                    </tr>
                </thead>
                <tbody class="customtable">
                    <tr *ngFor="
            let user of userfilterDat
              | filter: term
              | filter: termStatus
              | filter: termRole
              | filter: roleData
          ">
                        <th>
                            <label class="customcheckbox">
                                                <input type="checkbox" class="listCheckbox"  name="sizecb[]" value="{{user.id}}" [(ngModel)]="user.state" />
                                                <span class="checkmark body-check"></span>
                                            </label>
                        </th>
                        <td>{{ user.name }}</td>
                        <td>{{ user.lastLogin }}</td>
                        <td>
                            {{ user.email }}
                        </td>
                        <td>
                            <p class="status-active" *ngIf="user.status == 'ACTIVE'">
                                &#9679; {{ user.status | titlecase }}
                            </p>
                            <p class="status-disabled" *ngIf="user.status == 'INACTIVE'">
                                &#9679; {{ user.status | titlecase }}
                            </p>
                        </td>
                        <td>
                            <div *ngFor="let value of user.roles" id="{{ value.id }}_{{ user.id }}">
                                <button type="submit" id="delete_row" class=" delete_row" data-toggle="tooltip" data-placement="top" title="Delete" (click)="roleDeletionRoaster(value.id, user.id)" name="action" value="DELETE">
				<!-- <i class="fa fa-trash"></i> --> <img src="assets/images/delete.png" alt="">
				</button>
                                <span class="delete_name_txt"> {{ value.name }} </span> <br />
                            </div>
                        </td>
                        <td class="menu-arrow" [popover]="popTemplate" placement="left" [outsideClick]="true" #pop12="bs-popover">
                            <!-- <td><a data-toggle="popover" data-placement="left" data-toggle="popover"><p class="">&#x22EE;</p></a></td> -->

                            <a>
                                <p><img class="ellipse-image" src="/assets/images/ellipses.png" alt=""></p>
                            </a>
                            <ng-template #popTemplate>
                                <div id="popover-mobile-content">
                                    <ul class="list-group custom-popover">
                                        <li class="list-group-item">
                                            <a class="pointer-item" (click)="editMember(user.id); pop12.hide()">{{appLanguage.edit_member}}</a
                    >
                  </li>
                  <li class="list-group-item">
                    <a class="pointer-item" (click)="pop12.hide()"
                      >{{appLanguage.send_a_message}}</a
                    >
                  </li>
                  <li class="list-group-item">
                    <a class="pointer-item">{{appLanguage.send_recovery_email}}</a>
                                        </li>
                                        <li class="list-group-item">
                                            <a class="pointer-item" (click)="
                        openModal(template, user.id, user.name); pop12.hide()">{{appLanguage.assign_role}}</a
                    >
                  </li>
                  <li
                    class="list-group-item"
                    *ngIf="user.status == 'ACTIVE' && user.id != loginId"
                  >
                    <a
                      class="pointer-item"
                      (click)="userDisable(user.id); pop12.hide()"
                      >{{appLanguage.disable_account}}</a
                    >
                  </li>
                  <li
                    class="list-group-item"
                    *ngIf="user.status == 'INACTIVE' && user.id != loginId"
                  >
                    <a
                      class="pointer-item"
                      (click)="userEnable(user.id); pop12.hide()"
                      >{{appLanguage.enable_account}}</a
                    >
                  </li>
                  <li class="list-group-item">
                    <a class="pointer-item">{{appLanguage.simulated_login}}</a>
                                        </li>
                                        <li class="list-group-item">
                                            <a class="pointer-item" (click)="makeAdmin(user.id); pop12.hide()">{{appLanguage.make_admin}}</a>
                                        </li>
                                        <li class="list-group-item">
                                            <a class="pointer-item">{{appLanguage.customize_permissions}}</a>
                                        </li>
                                        <li class="list-group-item" *ngIf="user.id != loginId">
                                            <a class="pointer-item" (click)="deleteRoasterUser(user.id); pop12.hide()">{{appLanguage.delete}}</a
                    >
                  </li>
                </ul>
              </div>
            </ng-template>
          </td>
        </tr>
        </tbody>
    </table>
  </div>
</div>

<div class="mobile_view_user">
    <p class=" page-title">{{appLanguage.user_management}}</p>
    <div class="col-sm-12 search-div mb-4">
      <input
        type="text"
        name="search"
        class="search"
        [(ngModel)]="term"
        placeholder="Search by Name,role.."
      />
	</div>
<div class="d-inline filter-mob">
	<div class="d-inline border-total status-div col-sm-6" id="status_mobid" [outsideClick]="true" (onShown)="toggleStatus1();" (onHidden)="toggleStatus1();" [popover]="allTemplateMob" placement="bottom" container="body" #pop15="bs-popover">
			<p class="d-inline filter-text" *ngIf="termStatusMob == ''">{{appLanguage.status}}&nbsp;</p>
			<a class="pointer-item" >
				<p class="d-inline filter" *ngIf="termStatusMob == ''">
					&nbsp; <img src="{{ showMobVar ? 'assets/images/down-arrow.svg' : 'assets/images/user-down.svg'}}" />
				</p>
			</a>
                                            <a class="pointer-item">
                                                <p class="d-inline filter" *ngIf="termStatusMob != ''">
                                                    {{ termStatusMob }}&nbsp; <img src="{{ showMobVar ? 'assets/images/down-arrow.svg' : 'assets/images/user-down.svg'}}" />
                                                </p>
                                            </a>
                                </div>
                                &nbsp;&nbsp;
                                <div class="d-inline border-total role-div col-sm-6" id="role_mobid" [outsideClick]="true" (onShown)="toggleRole1();" (onHidden)="toggleRole1();" [popover]="roleTemplateMob" placement="bottom" container="body" #pop7="bs-popover">
                                    <!-- <p class="d-inline">Role:</p><p class="d-inline filter"> All&nbsp;  <a data-toggle="popover-roles" data-placement="bottom"><img src="assets/images/active.png"></a></p> -->
                                    <p class="d-inline filter-text" *ngIf="termRoleMob == ''">{{appLanguage.role}}&nbsp;</p>
                                    <a class="pointer-item">
                                        <p class="d-inline filter" *ngIf="termRoleMob == ''">
                                            &nbsp; <img src="{{ showMobRole ? 'assets/images/down-arrow.svg' : 'assets/images/user-down.svg'}}" />
                                        </p>
                                    </a>
                                    <a class="pointer-item">
                                        <p class="d-inline filter" *ngIf="termRoleMob != ''">
                                            {{ termRoleMob }}&nbsp;<img src="{{ showMobRole ? 'assets/images/down-arrow.svg' : 'assets/images/user-down.svg'}}" />
                                        </p>
                                    </a>
                                </div>
        </div>


        <!--li> <label class="customcheckbox">
				 <input type="checkbox" class="listCheckbox"  name="check"/>
				 <span class="checkmark"></span>
			   </label></li-->

        <div class="pt-5">

            <ul class="dyn-userdata" *ngFor="
        let mobileuser of userfilterDat
          | filter: term
          | filter: termStatusMob
          | filter: termRoleMob">

                <li>
                    <ul class="user-list-detail">
                        <li>
                            <div class="">
                                <div class="user-name pb-1">{{ mobileuser.name }}</div>
                                <div class="user-email pb-2">{{ mobileuser.email }}</div>
                                <div class="lastlogin pb-1">
                                    {{appLanguage.last_login}} <span class="roles">{{ mobileuser.lastLogin }}</span>
                                </div>

                            </div>
                        </li>
                        <li> <img src="assets/images/add-user.svg" alt="Dashboard"></li>
                        <li class="pull-right" class="menu-arrow" [popover]="popUserTemplate" placement="left" [outsideClick]="true" #pop11="bs-popover">
                            <a>
                                <p><img class="ellipse-image" src="/assets/images/ellipses.png" alt=""></p>
                            </a>
                            <ng-template #popUserTemplate>
                                <div id="">
                                    <ul class="list-data custom-popover">
                                        <li class="list-item">
                                            <a class="pointer-item" (click)="editMember(mobileuser.id); pop11.hide()">{{appLanguage.edit_member}}</a
									   >
									 </li>
									 <li class="list-item">
									   <a class="pointer-item" (click)="pop11.hide()">{{appLanguage.send_a_message}}</a
									   >
									 </li>
									 <li class="list-item">
									   <a class="pointer-item">{{appLanguage.send_recovery_email}}</a>
                                        </li>
                                        <li class="list-item">
                                            <a class="pointer-item" (click)="
										   openModal(template, mobileuser.id, mobileuser.name); pop11.hide()
										 ">{{appLanguage.assign_role}}</a
									   >
									 </li>
									 <li
									   class="list-item"
									   *ngIf="mobileuser.status == 'ACTIVE' && mobileuser.id != loginId"
									 >
									   <a
										 class="pointer-item"
										 (click)="userDisable(mobileuser.id); pop11.hide()"
										 >{{appLanguage.disable_account}}</a
									   >
									 </li>
									 <li
									   class="list-item"
									   *ngIf="mobileuser.status == 'INACTIVE' && mobileuser.id != loginId"
									 >
									   <a
										 class="pointer-item"
										 (click)="userEnable(mobileuser.id); pop11.hide()"
										 >{{appLanguage.enable_account}}</a
									   >
									 </li>
									 <li class="list-item">
									   <a class="pointer-item">{{appLanguage.simulated_login}}</a>
                                        </li>
                                        <li class="list-item">
                                            <a class="pointer-item" (click)="makeAdmin(mobileuser.id); pop11.hide()">{{appLanguage.make_admin}}</a>
                                        </li>
                                        <li class="list-item">
                                            <a class="pointer-item">{{appLanguage.customize_permissions}}</a>
                                        </li>
                                        <li class="list-item" *ngIf="mobileuser.id != loginId">
                                            <a class="pointer-item" (click)="deleteRoasterUser(mobileuser.id); pop11.hide()">{{appLanguage.delete}}</a
									   >
									 </li>
								   </ul>
								 </div>
							   </ng-template>
							</li>
			  </ul>
		  </li>
       
     <li>
		 <div class="row">
			 <div class="col-8 left-padd">
				 <div class="row">
				<div
				class="delete_icon col-12  p-0 mt-1 no-padding"
				*ngFor="let value of mobileuser.roles"
			  >
				<button
				  type="submit"
				  id="delete_row"
				  class="delete_row icon_value"
				  data-toggle="tooltip"
				  data-placement="top"
				  title="Delete"
				  (click)="roleDeletionRoaster(value.id, mobileuser.id)"
				  name="action"
				  value="DELETE"
				>
				  <!-- <i class="fa fa-trash"></i> --><img src="assets/images/delete.png" alt="">
				  </button
				><span class="role-mob">{{ value.name }}</span><br />
			  </div></div></div>
			 <div class="col-4 text-right right-padd">
				 <span class="status-active" *ngIf="mobileuser.status == 'ACTIVE'">&#9679; {{ mobileuser.status | titlecase }}</span>
				 <span class="status-disabled" *ngIf="mobileuser.status == 'INACTIVE'">
						&#9679; {{ mobileuser.status | titlecase }}
				 </span>
				
				</div>
		 </div>
	 </li>
		
    </ul>

  </div>
</div>
<ng-template #roleTemplate>
  <div>
    <ul class="list-group custom-popover">
      <li class="list-group-item item-color" (click)="setRole(''); pop2.hide(); pop5.hide();">
        <a class="pointer-item">All</a
        >
      </li>
      <li class="list-group-item item-color" *ngFor="let role of roles" (click)="setRole(role.name); pop2.hide(); pop5.hide();">
        <a class="pointer-item">{{ role.name }}</a>
                                        </li>
                                    </ul>
                                </div>
                            </ng-template>

                            <ng-template #roleTemplateMob>
                                <div>
                                    <ul class="list-group custom-popover">
                                        <li class="list-group-item item-color" (click)="setRoleMob('');pop7.hide();">
                                            <a class="pointer-item">All</a
			  >
			</li>
			<li class="list-group-item item-color" *ngFor="let role of roles" (click)="setRoleMob(role.name);pop7.hide();">
			  <a
				class="pointer-item"
				>{{ role.name }}</a
			  >
			</li>
		  </ul>
		</div>
	  </ng-template>

<ng-template #allTemplate>
  <div id="status-content">
    <ul class="list-group custom-popover">
      <li class="list-group-item item-color" (click)="setStatus(''); pop.hide();">
        <a class="pointer-item" 
          >All</a
        >
      </li>
      <li class="list-group-item item-color" (click)="setStatus('Active'); pop.hide();">
        <a
          class="pointer-item"
          >Active</a
        >
      </li>
      <li class="list-group-item item-color" (click)="setStatus('Inactive'); pop.hide();">
        <a
          class="pointer-item"
          >Inactive</a
        >
      </li>
    </ul>
  </div>
</ng-template>
<ng-template #allTemplateMob>
		<div id="status-content">
		  <ul class="list-group custom-popover">
			<li class="list-group-item item-color" (click)="setStatusMob('');pop15.hide(); ">
			  <a class="pointer-item" 
				>All</a
			  >
			</li>
			<li class="list-group-item item-color" (click)="setStatusMob('Active'); pop15.hide();">
			  <a
				class="pointer-item"
				
				>Active</a
			  >
			</li>
			<li class="list-group-item item-color" (click)="setStatusMob('Inactive');pop15.hide();">
			  <a
				class="pointer-item"
				
				>Inactive</a
			  >
			</li>
		  </ul>
		</div>
	  </ng-template>

<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Assign Role</h4>
    <button
      type="button"
      class="close pull-right"
      aria-label="Close"
      (click)="modalRef.hide()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
                        </div>
                        <div class="modal-body">
                            <form class="form-container">
                                <div class="form-group row pt-3">
                                    <div class="form-group col-md-12">
                                        <label>User Name</label>
                                        <input type="hidden" [(ngModel)]="modalUserRoasterId" value="{{ modalUserRoasterId }}" [ngModelOptions]="{ standalone: true }" />
                                        <input type="text" class="form-control" [(ngModel)]="modalUserRoasterName" [value]="modalUserRoasterName" [ngModelOptions]="{ standalone: true }" required />
                                    </div>
                                </div>
                            </form>
                            <div class="row d-inline col-xs-6 heading ml-2">
                                <p class="d-inline update-title">Select roles</p>
                                <select class="d-inline update-title" [(ngModel)]="role_roasteruser_id">
        <option *ngFor="let userrole of roles" [value]="userrole.id">{{
          userrole.name
        }}</option>
      </select>
                                <span>
        <img
          src="assets/images/arrow-down.png"
          alt="user"
          class="icon-select"
        />
      </span>
                            </div>
                            <div class="main_button mb-2">
                                <!-- <button type="submit" (click)="SubmitRole();" class="chn-btn btn mt-5">Submit</button> -->
                                <button type="submit" class="chn-btn btn mt-5" (click)="SubmitRole()" [disabled]="assignButtonValue === 'Submitting'">
        {{ assignButtonValue
        }}<img
          class="loader"
          *ngIf="assignButtonValue === 'Submitting'"
          src="assets/images/orange-loader.gif"
        />
      </button>
                            </div>
                        </div>
                        </ng-template>
                        <!-- <ng-template #infoTemplate>
        <h4 class="info-title">What is Lorem Ipsum?</h4>
        <p class="info-content">
          Lorem Ipsum is simply dummy text of the printing and typesetting industry.
          Lorem Ipsum has been the industry's standard dummy text ever since the
          1500s, when an unknown printer took a galley of type and scrambled it to
          make a type specimen book. It has survived not only five centuries, but also
          the leap into electronic typesetting, remaining essentially unchanged. It
          was popularised in the 1960s with the release of Letraset sheets containing
          Lorem Ipsum passages, and more recently with desktop publishing software
          like Aldus PageMaker including versions of Lorem Ipsum.
        </p>
	  </ng-template> -->
	  
	</div>