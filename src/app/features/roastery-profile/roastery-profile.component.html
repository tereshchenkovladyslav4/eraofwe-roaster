<div class="bg-fff pl-lg-5 pr-lg-5 pt-lg-45 pb-lg-325">
    <div class="w-100 d-flex justify-content-between mb-3">
        <div>
            <p-breadcrumb [model]="items"></p-breadcrumb>
        </div>
        <div class="d-none d-md-block">
            <button
                pButton
                type="button"
                class="cancel-butn mr-2 fnt-14"
                label="{{ 'cancel' | translate }}"
                *ngIf="roasteryProfileService.savemode"
                (click)="roasteryProfileService.preview()"
            ></button>
            <button
                pButton
                type="button"
                class="btn-normal fnt-14"
                [disabled]="roasteryProfileService.isSaving"
                label="{{ 'save' | translate }}"
                *ngIf="roasteryProfileService.savemode"
                (click)="roasteryProfileService.saveRoasterProfile()"
            ></button>
            <button
                pButton
                type="button"
                class="btn-normal fnt-14"
                label="{{ 'edit' | translate }}"
                *ngIf="roasteryProfileService.editmode"
                (click)="roasteryProfileService.editRoasterProfile()"
            ></button>
        </div>
    </div>
    <div class="p-0">
        <p class="fnt-18-normal fnt-muli mb-0 mb-md-3 fnt-bold text-clr334">
            {{ 'roastery_profile' | translate }}
        </p>
        <div class="profile-header-details position-relative">
            <img
                class="cover-image-profile-banner w-100"
                *ngIf="roasteryProfileService.savemode && roasteryProfileService.bannerUrl"
                [src]="roasteryProfileService.bannerUrl"
                height="160"
            />

            <div
                class="cover-pic text-center"
                *ngIf="roasteryProfileService.savemode && !roasteryProfileService.bannerUrl"
                (click)="bannerFileInput.click()"
            >
                <img class="plus-circle" src="assets/images/plus-circle.svg" />
                <img class="camera desk-view" src="assets/images/camera.svg" />
                <p class="fnt-14 font-bold text-clr588 pt-2 m-0">{{ 'add_cover_image' | translate }}</p>
                <p class="fnt-14 font-bold text-clr588 m-0">{{ 'dimension' | translate }} 1144 x 160</p>
            </div>
            <input
                type="file"
                hidden
                #bannerFileInput
                (change)="roasteryProfileService.handleBannerImageFile($event.target)"
            />

            <img
                class="cover-image-profile-banner w-100"
                *ngIf="roasteryProfileService.editmode && !roasteryProfileService.bannerUrl"
                src="assets/images/blank.png"
                height="160"
            />
            <img
                class="cover-image-profile-banner w-100"
                *ngIf="roasteryProfileService.editmode && roasteryProfileService.bannerUrl"
                [src]="roasteryProfileService.bannerUrl"
                height="160"
            />

            <div class="edit-btn-group d-flex">
                <button
                    *ngIf="roasteryProfileService.savemode && roasteryProfileService.bannerUrl"
                    class="btn-normal fnt-14 d-none d-lg-flex mr-2"
                    (click)="bannerFileInput.click()"
                    pButton
                    label="{{ 'replace_image' | translate }}"
                ></button>
                <button
                    pButton
                    icon="pi pi-trash"
                    iconPos="left"
                    *ngIf="roasteryProfileService.savemode && roasteryProfileService.bannerUrl"
                    class="fnt-14 btn-trans-nb d-none d-lg-flex"
                    (click)="roasteryProfileService.handleDeleteBannerImage()"
                    label="{{ 'delete' | translate }}"
                ></button>
            </div>
        </div>
        <div class="profile-description-container">
            <div class="profile-avatar" [ngClass]="{ 'br-main': !profilePhotoService.croppedImage }">
                <img [src]="profilePhotoService.croppedImage" class="avatar-img" />
                <a class="change-avatar-btn" *ngIf="roasteryProfileService.savemode" (click)="showModalDialog()">
                    <img src="assets/images/camera.svg" class="camera-pic" />
                </a>
            </div>
            <div>
                <input type="file" accept="image/*" hidden #image (change)="handleFile($event)" />
            </div>

            <div class="profile-metadata-container">
                <p class="fnt-18-normal font-bold text-clr334 m-0 pt-4" *ngIf="roasteryProfileService.editmode">
                    {{ roasteryProfileService.name }}
                </p>
                <a class="uparrow-link d-sm-none" href="{{ roasteryProfileService.website }}" target="blank">{{
                    roasteryProfileService.name
                }}</a>
                <input
                    pInputText
                    type="text"
                    *ngIf="roasteryProfileService.savemode"
                    class="p-3 fnt-14-normal text-clr334 font-bold w-100"
                    [(ngModel)]="roasteryProfileService.name"
                    style="margin-top: 11px"
                    name="name"
                />
                <input
                    id="company-website"
                    class="p-3 fnt-14-normal text-clr588 font-bold w-100 mt-2"
                    *ngIf="roasteryProfileService.savemode"
                    type="text"
                    pInputText
                    placeholder="www.royalcoffee.az.com/"
                    [(ngModel)]="roasteryProfileService.website"
                    style="margin-top: 10px"
                    name="website"
                />
                <p class="fnt-14-normal text-clr588 mt-2" *ngIf="roasteryProfileService.editmode">
                    {{ roasteryProfileService.website }}
                </p>
                <a target="blank" href="{{ roasteryProfileService.website }}" #link hidden></a>
            </div>
        </div>
    </div>
</div>

<div class="bg-fff p-5 mt-md-3">
    <div class="tab">
        <div class="responsive-tabMenu">
            <p-tabMenu [model]="menuItems"></p-tabMenu>
        </div>
        <div class="mt-3">
            <router-outlet></router-outlet>
        </div>
    </div>
    <div class="mobile-farm farm-stricky col-12">
        <div class="row" *ngIf="roasteryProfileService.savemode">
            <div class="col-6">
                <button
                    type="button"
                    pButton
                    class="btn-stroked w-100"
                    [label]="globals.languageJson?.preview"
                    (click)="roasteryProfileService.preview()"
                ></button>
            </div>
            <div class="col-6">
                <button
                    type="button"
                    pButton
                    class="btn-stroked w-100"
                    [label]="globals.languageJson?.save"
                    (click)="roasteryProfileService.saveRoasterProfile()"
                ></button>
            </div>
        </div>
        <button
            type="button"
            class="btn edit-butn"
            *ngIf="roasteryProfileService.editmode"
            (click)="roasteryProfileService.editRoasterProfile()"
        >
            {{ globals.languageJson?.go_back_edit }}
        </button>
    </div>
</div>

<p-dialog
    header="Edit Photo"
    [(visible)]="profilePhotoService.displayModal"
    [modal]="true"
    [style]="{ width: '50vw' }"
    [baseZIndex]="10000"
    [draggable]="false"
    [resizable]="false"
    styleClass="no-padding"
>
    <p-header>
        <span class="close-img-div">
            <img
                class="close-pic pull-right"
                src="assets/images/close.svg"
                alt="close-image"
                (click)="closeProfileModal()"
            />
        </span>
    </p-header>
    <sewn-profile-photo></sewn-profile-photo>
    <p-footer>
        <button type="button" id="change-pic" class="previous btn" (click)="showModalDialog()">
            {{ globals.languageJson?.change_photo }}
        </button>
        <button
            type="button"
            id="save-pic"
            class="btn btn-info login-butn"
            (click)="profilePhotoService.saveProfilePic()"
        >
            {{ globals.languageJson?.save_photo }}
        </button>
    </p-footer>
</p-dialog>
