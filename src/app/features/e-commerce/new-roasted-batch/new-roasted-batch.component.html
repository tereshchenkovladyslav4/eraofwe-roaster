<section>
    <div class="main-block">
        <div class="row pb-3">
            <div class="col-10">
                <app-breadcrumb [items]="breadCrumbItem"></app-breadcrumb>
            </div>
        </div>
        <!-- <nav role="navigation" aria-labelledby="title-breadcrumb-1" class="breadcrumb1 pt-4">
                <button
                    type="submit"
                    class="btn col-12 col-md-1 pull-right add-role-butn d-md-block d-none"
                    (click)="addRoastedCoffeeBatch()"
                >
                    {{ globals.languageJson?.save }}
                </button>
        </nav> -->
        <div class="row">
            <div class="col-12 col-md-8 col-lg-8">
                <div class="row mt-4 pb-2">
                    <div class="col-12">
                        <span class="primary_txt mb-1">{{ globals.languageJson?.create_roasted_batch }}</span>
                    </div>
                </div>
                <div class="mt-4 pb-2" [formGroup]="batchForm" (ngSubmit)="onSave()" novalidate>
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-6 col-lg-10 col-xl-10 sewn-form-field w-100">
                            <label>Roast batch name<span class="star">*</span></label>
                            <input
                                type="text"
                                placeholder="Enter a roast batch name"
                                formControlName="roast_batch_name"
                                pInputText
                            />
                            <small *ngIf="batchForm.controls['roast_batch_name'].errors?.required" class="p-error">
                                Required
                            </small>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-12 mb-1">
                            <span class="primary_txt mb-1">{{ globals.languageJson?.order_id }}*</span>
                        </div>
                        <div class="col-12 mb-3">
                            <span class="fnt-14 fnt-muli black fnt-normal mb-3"
                                >Select the order through which the green coffee</span
                            >
                        </div>
                        <div class="col-12 col-sm-12 col-md-5 col-lg-5 col-xl-5">
                            <div class="sample_info">
                                <div
                                    class="info_heading d-flex cursor-pointer"
                                    routerLink="/features/select-order-list"
                                >
                                    <div class="pull-left secondary_txt" *ngIf="!ordId">Select the order</div>
                                    <div class="pull-left secondary_txt" *ngIf="ordId">{{ ordId }}</div>
                                    <div class="pull-left secondary_txt" *ngIf="ordId && batchId" >{{ ordId }}</div>

                                    <div class="ml-auto pull-right">
                                        <img class="pl-1" src="assets/images/arrow-1.png" alt="" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-4">
                        <div class="col-12 col-sm-12 col-md-5 col-lg-5 col-xl-5 sewn-form-field w-100">
                            <label>Select roasting profile<span class="star">*</span></label>
                            <p-dropdown
                                [options]="roastProfileArray"
                                optionLabel="label"
                                placeholder="Select the roasting profile"
                                [style]="{ width: '100%' }"
                                formControlName="roasting_profile_id"
                                optionValue="value"
                            ></p-dropdown>
                            <small *ngIf="batchForm.controls['roasting_profile_id'].errors?.required" class="p-error">
                                Required
                            </small>
                        </div>
                        <div class="col-12 col-sm-6 col-md-5 col-lg-5 col-xl-5 sewn-form-field w-100">
                            <label>Quantity after roasted<span class="star">*</span></label>
                            <div class="input-group weightInputGroupDiv">
                                <input
                                    type="number"
                                    class="weightInputDiv"
                                    formControlName="roasting_profile_quantity"
                                    pInputText
                                />

                                <div class="input-group-append">
                                    <p-dropdown
                                        [options]="weightTypeArray"
                                        optionLabel="label"
                                        placeholder=""
                                        [style]="{ width: '100%', border: '0px' }"
                                        formControlName="roasting_profile_unit"
                                        optionValue="value"
                                    >
                                    </p-dropdown>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-5 col-lg-5 col-xl-5 sewn-form-field w-100">
                            <label>Aroma<span class="star">*</span></label>
                            <input type="number" placeholder="Enter a number" formControlName="aroma" pInputText />
                            <small *ngIf="batchForm.controls['aroma'].errors?.required" class="p-error">
                                Required
                            </small>
                        </div>
                        <div class="col-12 col-sm-12 col-md-5 col-lg-5 col-xl-5 sewn-form-field w-100">
                            <label>Acidity<span class="star">*</span></label>
                            <input type="number" placeholder="Enter a number" formControlName="acidity" pInputText />
                            <small *ngIf="batchForm.controls['acidity'].errors?.required" class="p-error">
                                Required
                            </small>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 col-sm-12 col-md-5 col-lg-5 col-xl-5 sewn-form-field w-100">
                            <label>Body<span class="star">*</span></label>
                            <input type="number" placeholder="Enter a number" formControlName="body" pInputText />
                            <small *ngIf="batchForm.controls['body'].errors?.required" class="p-error">
                                Required
                            </small>
                        </div>
                        <div class="col-12 col-sm-12 col-md-5 col-lg-5 col-xl-5 sewn-form-field w-100">
                            <label>Flavour<span class="star">*</span></label>
                            <input type="number" placeholder="Enter a number" formControlName="flavour" pInputText />
                            <small *ngIf="batchForm.controls['flavour'].errors?.required" class="p-error">
                                Required
                            </small>
                        </div>
                    </div>
                    <div class="row pt-3 pb-4">
                        <div class="col-md-6 col-12">
                            <a
                                class="pointer-item"
                                [popover]="allTemplate"
                                placement="right"
                                [outsideClick]="true"
                                container="body"
                                #pop2="bs-popover"
                            >
                                <span class="share-bor"
                                    ><img src="assets/images/region-plus.svg" alt="farm" class="dwnd-img" /><span
                                        class="share-txt ml-1"
                                    >
                                        Add Descriptors
                                    </span></span
                                >
                            </a>
                            <div class="chips">
                                <mat-chip-list #chipList aria-label="language" class="desk-chips">
                                    <mat-chip
                                        *ngFor="let language of langChips"
                                        [selectable]="selectable"
                                        [removable]="removable"
                                        (removed)="remove(language)"
                                        >{{ language.name }}
                                        <img
                                            *ngIf="removable"
                                            class="cross-icon"
                                            src="assets/images/cross-white.svg"
                                            (click)="remove(language)"
                                        />
                                    </mat-chip>
                                </mat-chip-list>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-12 col-sm-12 col-md-10 col-lg-10 col-xl-10 sewn-form-field w-100">
                            <label>Roaster Notes<span class="star">*</span></label>
                            <textarea
                                type="text"
                                class="descriptionText-area"
                                placeholder="Please give a small comment/ description"
                                formControlName="roaster_notes"
                                pInputText
                            ></textarea>
                            <small *ngIf="batchForm.controls['roaster_notes'].errors?.required" class="p-error">
                                Required
                            </small>
                        </div>
                    </div>
                    <div class="row mt-4 d-none d-sm-none d-md-flex">
                        <div class="col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6">
                            <button type="button" class="btn btn-stroked" (click)="onCancel()">Cancel</button>
                            <button type="submit" class="btn btn-raised ml-4" (click)="onSave()">Save</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-12 col-md-4 col-lg-4" *ngIf="ordId && batchId">
                <p class="fnt-18 fnt-muli fnt-700 black pt-2 pt-md-4">{{ globals.languageJson?.order_details }}</p>

                <div class="order-details-clr">
                    <div class="row mt-3">
                        <div class="p-0">
                            <img
                                *ngIf="orderDetails.estate_profile_image_thumbnail_url == ''"
                                src="assets/images/profile.svg"
                                alt="User"
                                class="img-estate profile-pic"
                            />
                            <img
                                *ngIf="orderDetails.estate_profile_image_thumbnail_url != ''"
                                src="{{ orderDetails.estate_profile_image_thumbnail_url }}"
                                alt="User"
                                class="img-estate profile-pic"
                            />
                        </div>
                        <div class="pull-left">
                            <ul class="details-list p-0 ml-2 ml-md-3">
                                <li class="estate-name">{{ orderDetails.estate_owner }}</li>
                                <li class="estate-number pt-1">Coffee Estate</li>
                            </ul>
                        </div>
                        <div class="pull-right ml-auto">
                            <p>
                                <span class="cursor-pointer">
                                    <img src="assets/images/star-1.png" alt="User" />
                                    <span class="star-no pl-1"> {{ rating }}</span>
                                </span>
                            </p>
                            <p>
                                <span
                                    class="bg-msg"
                                    (mouseenter)="greenIconShow = true"
                                    (mouseleave)="greenIconShow = false"
                                >
                                    <img
                                        class="message-icon"
                                        *ngIf="!greenIconShow"
                                        src="assets/images/message-icon.svg"
                                        alt="Message"
                                    />
                                    <img
                                        class="message-icon"
                                        *ngIf="greenIconShow"
                                        src="assets/images/green-msg-icon.svg"
                                        alt="Message"
                                    />
                                    <span
                                        class="estate-message pl-2"
                                        [ngStyle]="{ color: greenIconShow ? 'green' : '' }"
                                        >{{ globals.languageJson?.message }}</span
                                    >
                                </span>
                            </p>
                        </div>
                    </div>

                    <div class="row pt-3">
                        <table class="recent-time">
                            <tr>
                                <td><span class="list-que"> Origin : </span></td>
                                <td>
                                    <span class="list-ans">
                                        {{ orderDetails.origin | country }}
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="list-que"> Variety : </span></td>
                                <td>
                                    <span class="list-ans"> {{ orderDetails.variety | titlecase }} </span>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="list-que"> Price : </span></td>
                                <td>
                                    <span class="list-ans"> ${{ orderDetails.price }} USD/kg </span>
                                </td>
                            </tr>

                            <tr>
                                <td><span class="list-que"> Quantity : </span></td>
                                <td>
                                    <span class="list-ans"> {{ orderDetails.quantity }} Kg </span>
                                </td>
                            </tr>

                            <tr>
                                <td><span class="list-que"> Date recieved: </span></td>
                                <td>
                                    <span class="list-ans"> {{ orderDetails.created_at | date: 'd MMM y' }} </span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- 

        <div class="row">
            <div class="col-md-8 col-12">
                <p class="fnt-18 fnt-muli fnt-700 black">{{ globals.languageJson?.create_roasted_batch }}</p>

                <div class="row pt-3">
                    <div class="col-12 col-md-6 float-md-left">
                        <div class="farm-input">
                            <label class="label p-0">Roast batch name*</label>
                            <input
                                type="text"
                                placeholder=""
                                [(ngModel)]="roast_batch_name"
                                [ngModelOptions]="{ standalone: true }"
                            />
                        </div>
                    </div>
                </div>

                <p class="fnt-18 fnt-muli fnt-700 black pt-2 pt-md-4">{{ globals.languageJson?.order_id }}*</p>

                <div class="row pt-3 pb-3">
                    

                    <div class="col-12 col-md-6 float-md-left">
                        <p class="fbt-14 fnt-muli fnt-400 text-clr334">
                            Select the order through which the green coffee
                        </p>
                        <div class="sample_info">
                            <div class="info_heading d-flex cursor-pointer" routerLink="/features/select-order-list">
                                <div class="pull-left sample_info_head">Select the order</div>
                                <div class="ml-auto pull-right">
                                    <img class="pl-1" src="assets/images/arrow-1.png" alt="" />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row pt-5 pb-3">
                    <div class="col-12 col-md-6 float-md-left">
                        <div class="farm-input">
                            <label class="label p-0">Select roasting profile*</label>
                            <div class="cupping-total" id="cupping_id">
                                <p class="d-inline filter-text" *ngIf="cupping == ''">Select type of cupping&nbsp;</p>
                                <a
                                    class="pointer-item arrow__spacing"
                                    [popover]="cuppingTemplate"
                                    placement="bottom"
                                    container="body"
                                    #pop6="bs-popover"
                                >
                                    <p class="d-inline filter" *ngIf="cupping == ''" (click)="toggleCupping()">
                                        &nbsp;
                                        <img
                                            class=""
                                            src="{{
                                                showCupping
                                                    ? 'assets/images/down-arrow.svg'
                                                    : 'assets/images/arrow-cupping.svg'
                                            }}"
                                        />
                                    </p>
                                </a>
                                <p class="d-inline add-variety" *ngIf="cupping != ''">{{ cupping }}</p>
                                <a
                                    class="pointer-item arrow__spacing"
                                    [popover]="cuppingTemplate"
                                    placement="bottom"
                                    container="body"
                                    #pop7="bs-popover"
                                >
                                    <p class="d-inline filter" *ngIf="cupping != ''" (click)="toggleCupping()">
                                        &nbsp;<img
                                            class=""
                                            src="{{
                                                showCupping
                                                    ? 'assets/images/down-arrow.svg'
                                                    : 'assets/images/arrow-cupping.svg'
                                            }}"
                                        />
                                    </p>
                                </a>
                            </div>
                        </div>
                    </div>

                   
                    <div class="col-12 col-md-6 float-md-left">
                        <div class="farm-input">
                            <label class="label p-0">Quantity after roasted*</label>
                            <div class="input-group">
                                <input
                                    type="text"
                                    placeholder="Enter quantity"
                                    class="form-control input-group-right-border"
                                    aria-label="Text input with dropdown button"
                                    [(ngModel)]="quantity"
                                    [ngModelOptions]="{ standalone: true }"
                                />
                                <div class="input-group-append">
                                    <select
                                        name="type"
                                        required=""
                                        class="form-control select-region select-form-group-dropdown select-region-local"
                                        [(ngModel)]="quantity_unit"
                                        [ngModelOptions]="{ standalone: true }"
                                    >
                                        <option value="kg">Kg</option>
                                        <option value="lb">lb</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4" *ngIf="showDetails">
                <p class="fnt-18 fnt-muli fnt-700 black pt-2 pt-md-4">{{ globals.languageJson?.order_details }}</p>

                <div class="order-details-clr">
                    <div class="row mt-3">
                        <div class="p-0">
                            <img
                                *ngIf="orderDetails.estate_profile_image_thumbnail_url == ''"
                                src="assets/images/profile.svg"
                                alt="User"
                                class="img-estate profile-pic"
                            />
                            <img
                                *ngIf="orderDetails.estate_profile_image_thumbnail_url != ''"
                                src="{{ orderDetails.estate_profile_image_thumbnail_url }}"
                                alt="User"
                                class="img-estate profile-pic"
                            />
                        </div>
                        <div class="pull-left">
                            <ul class="details-list p-0 ml-2 ml-md-3">
                                <li class="estate-name">{{ orderDetails.estate_owner }}</li>
                                <li class="estate-number pt-1">Coffee Estate</li>
                            </ul>
                        </div>
                        <div class="pull-right ml-auto">
                            <p>
                                <span class="cursor-pointer">
                                    <img src="assets/images/star-1.png" alt="User" />
                                    <span class="star-no pl-1"> {{ rating }}</span>
                                </span>
                            </p>
                            <p>
                                <span
                                    class="bg-msg"
                                    (mouseenter)="greenIconShow = true"
                                    (mouseleave)="greenIconShow = false"
                                >
                                    <img
                                        class="message-icon"
                                        *ngIf="!greenIconShow"
                                        src="assets/images/message-icon.svg"
                                        alt="Message"
                                    />
                                    <img
                                        class="message-icon"
                                        *ngIf="greenIconShow"
                                        src="assets/images/green-msg-icon.svg"
                                        alt="Message"
                                    />
                                    <span
                                        class="estate-message pl-2"
                                        [ngStyle]="{ color: greenIconShow ? 'green' : '' }"
                                        >{{ globals.languageJson?.message }}</span
                                    >
                                </span>
                            </p>
                        </div>
                    </div>

                    <div class="row pt-3">
                        <table class="recent-time">
                            <tr>
                                <td><span class="list-que"> Origin : </span></td>
                                <td>
                                    <span class="list-ans">
                                        {{ orderDetails.origin | country }}
                                    </span>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="list-que"> Variety : </span></td>
                                <td>
                                    <span class="list-ans"> {{ orderDetails.variety | titlecase }} </span>
                                </td>
                            </tr>
                            <tr>
                                <td><span class="list-que"> Price : </span></td>
                                <td>
                                    <span class="list-ans"> ${{ orderDetails.price }} USD/kg </span>
                                </td>
                            </tr>

                            <tr>
                                <td><span class="list-que"> Quantity : </span></td>
                                <td>
                                    <span class="list-ans"> {{ orderDetails.quantity }} Kg </span>
                                </td>
                            </tr>

                            <tr>
                                <td><span class="list-que"> Date recieved: </span></td>
                                <td>
                                    <span class="list-ans"> {{ orderDetails.created_at | date: 'd MMM y' }} </span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <p class="fnt-18 fnt-muli fnt-700 black pt-2 pt-md-4">{{ globals.languageJson?.tasting_notes }}</p>

        <div class="row pt-3 pb-3">
            <div class="col-12 col-md-3 float-md-left">
                <div class="farm-input">
                    <label class="label p-0">Aroma*</label>
                    <input
                        type="text"
                        placeholder="Please enter"
                        [(ngModel)]="aroma"
                        [ngModelOptions]="{ standalone: true }"
                    />
                </div>
            </div>
            <div class="col-12 col-md-3 float-md-left">
                <div class="farm-input">
                    <label class="label p-0">Acidity*</label>
                    <input
                        type="text"
                        placeholder="Please enter"
                        [(ngModel)]="acidity"
                        [ngModelOptions]="{ standalone: true }"
                    />
                </div>
            </div>
            <div class="col-12 col-md-3 float-md-left">
                <div class="farm-input">
                    <label class="label p-0">Processing*</label>
                    <input
                        type="text"
                        placeholder="Please enter"
                        [(ngModel)]="processing"
                        [ngModelOptions]="{ standalone: true }"
                    />
                </div>
            </div>
        </div>

        <div class="row pt-3 pb-3">
            <div class="col-12 col-md-3 float-md-left">
                <div class="farm-input">
                    <label class="label p-0">Body*</label>
                    <input
                        type="text"
                        placeholder="Please enter"
                        [(ngModel)]="body"
                        [ngModelOptions]="{ standalone: true }"
                    />
                </div>
            </div>

            <div class="col-12 col-md-3 float-md-left">
                <div class="farm-input">
                    <label class="label p-0">Flavour*</label>
                    <input
                        type="text"
                        placeholder="Please enter"
                        [(ngModel)]="flavour"
                        [ngModelOptions]="{ standalone: true }"
                    />
                </div>
            </div>
        </div>

        <div class="row pt-3 pb-3">
            <div class="col-md-6 col-12">
                <a
                    class="pointer-item"
                    [popover]="allTemplate"
                    placement="right"
                    [outsideClick]="true"
                    container="body"
                    #pop2="bs-popover"
                >
                    <span class="share-bor"
                        ><img src="assets/images/region-plus.svg" alt="farm" class="dwnd-img" /><span
                            class="share-txt ml-1"
                        >
                            Add Descriptors
                        </span></span
                    >
                </a>
                <div class="chips">
                    <mat-chip-list #chipList aria-label="language" class="desk-chips">
                        <mat-chip
                            *ngFor="let language of langChips"
                            [selectable]="selectable"
                            [removable]="removable"
                            (removed)="remove(language)"
                            >{{ language.name }}
                            <img
                                *ngIf="removable"
                                class="cross-icon"
                                src="assets/images/cross-white.svg"
                                (click)="remove(language)"
                            />
                        </mat-chip>
                    </mat-chip-list>
                </div>
            </div>
        </div>

        <div class="row pt-3 pb-3">
            <div class="col-12 col-md-6 float-md-left">
                <div class="farm-input">
                    <label class="label p-0"> Roaster Notes*</label>
                    <textarea
                        type="text"
                        rows="4"
                        cols="50"
                        [(ngModel)]="notes"
                        [ngModelOptions]="{ standalone: true }"
                    ></textarea>
                </div>
            </div>
        </div>
        <button class="cancel mt-2 mb-5">{{ globals.languageJson?.cancel }}</button>
    </div>
</section>

<ng-template #cuppingTemplate>
    <div>
        <ul class="list-group custom-popover flavour_popover">
            <li
                class="list-group-item item-color"
                *ngFor="let profile of roastingProfile"
                (click)="setCupping(profile.id); pop6.hide(); pop7.hide(); toggleCupping()"
            >
                <a class="pointer-item">{{ profile.roast_profile_name }}</a>
            </li>
        </ul>
    </div>
</ng-template> -->

        <ng-template #allTemplate>
            <div id="status-content">
                <ul class="list-group custom-popover">
                    <li *ngFor="let flavours of roasterFlavourProfile" class="list-group-item item-color">
                        <a class="pointer-item" (click)="addLang(flavours); pop2.hide()">{{ flavours.name }}</a>
                    </li>
                </ul>
            </div>
        </ng-template>
    </div>
</section>
