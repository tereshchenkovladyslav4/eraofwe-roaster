<div class="main-block">
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 d-flex align-items-center">
            <div class="back-href cursor-pointer">
                <img class="back-arrow-butn mr-2" src="assets/images/do-back-arrow.svg" />
                Back to ticket
            </div>
        </div>
        <div class="col-sm-12 col-md-12 col-lg-6 col-xl-6 d-none d-sm-none d-md-flex" *ngIf="selectedOrder">
            <button class="btn btn-stroked ml-auto">
                {{ globals.languageJson?.cancel }}
            </button>
            <button class="btn btn-raised ml-3" (click)="onContinue()">Continue</button>
        </div>
    </div>
    <div class="row mt-4">
        <div class="col-12">
            <div class="primary_txt mb-2">Select an order</div>
            <div class="secondary_txt">Please select an estate order to create a roaster coffee batch for</div>
        </div>
    </div>
    <div class="row mt-4">
        <div class="col-12">
            <p-dropdown
                [options]="originArray"
                optionLabel="name"
                optionValue="isoCode"
                [(ngModel)]="originFilter"
                (onChange)="filterCall()"
                scrollHeight="225px"
                [showClear]="true"
                placeholder="Origin"
                styleClass="round-border mr-2 mb-3 mb-md-4 {{ originFilter ? 'highlight' : '' }}"
            >
            </p-dropdown>
            <p-calendar
                styleClass="only-icon"
                [(ngModel)]="rangeDates"
                [showIcon]="true"
                selectionMode="range"
                dateFormat="dd.mm.yy"
                (onClose)="filterCall()"
                [readonlyInput]="true"
                [showButtonBar]="true"
                placeholder="{{ globals.languageJson?.date_range }}"
                styleClass="round-border"
            ></p-calendar>
            <p-dropdown
                [options]="displayArray"
                optionLabel="label"
                optionValue="value"
                [(ngModel)]="displayFilter"
                (onChange)="filterCall()"
                scrollHeight="225px"
                [showClear]="true"
                placeholder="Display"
                styleClass="round-border d-none d-sm-none d-md-flex float-right {{ displayFilter ? 'highlight' : '' }}"
            >
            </p-dropdown>
        </div>
    </div>
    <div class="row">
        <div class="col-12 orderTable">
            <p-table
                #myTable
                [class.table-mobile]="true"
                [value]="tableValue"
                [columns]="tableColumns"
                dataKey="id"
                [resizableColumns]="true"
                [paginator]="false"
                [rows]="displayFilter"
                styleClass="ui-table-disputes"
                selectionMode="single"
                [(selection)]="selectedOrder"
                [showCurrentPageReport]="false"
                [paginator]="false"
                [lazy]="true"
                (onLazyLoad)="getTableData()"
                [totalRecords]="totalCount"
                [responsive]="true"
            >
                <ng-template pTemplate="header" let-columns>
                    <tr class="d-none d-sm-none d-md-table-row">
                        <th style="width: 5%"></th>
                        <th
                            *ngFor="let col of columns"
                            [style.width]="col.width ? col.width + '%' : '30%'"
                            [ngClass]="{ 'd-md-none': col.field == 'add_user' }"
                        >
                            <span class="primeng-table-header tableDataFont">{{ col.header }}</span>
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowData let-columns="columns">
                    <tr class="rowClass">
                        <td class="d-none d-sm-none d-md-table-cell">
                            <p-tableRadioButton class="ml-2" [value]="rowData" (onChange)="onSelect(rowData)">
                            </p-tableRadioButton>
                        </td>
                        <td
                            *ngFor="let col of columns"
                            [ngSwitch]="col.field"
                            [style.width]="col.width ? col.width + '%' : '30%'"
                            [ngClass]="{
                                'd-none': col.field == 'created_at' || col.field == 'price' || col.field == 'type',
                                'd-sm-none': col.field == 'created_at' || col.field == 'price' || col.field == 'type',
                                'd-md-table-cell':
                                    col.field == 'created_at' || col.field == 'price' || col.field == 'type',
                                nameMobileHeader: col.field == 'id',
                                mobileBorderClass:
                                    col.field == 'estate_name' || col.field == 'origin' || col.field == 'species',
                                mobileBottom: col.field == 'status'
                            }"
                        >
                            <span *ngSwitchCase="'id'" class="d-md-block">
                                <span class="d-none d-sm-none d-md-block tableDataFont">{{ rowData[col.field] }}</span>
                                <div class="d-block d-sm-block d-md-none mobileNameDiv">
                                    <span class="primary_txt tableDataFont mobileHeader"
                                        >Order ID #{{ rowData[col.field] }}</span
                                    >
                                    <p-tableCheckbox class="float-right" [value]="rowData"></p-tableCheckbox>
                                </div>
                            </span>
                            <span *ngSwitchCase="'estate_name'" class="d-md-block">
                                <span class="d-none d-sm-none d-md-block tableDataFont">{{ rowData[col.field] }}</span>
                                <div class="d-flex d-sm-flex d-md-none">
                                    <span class="prime-table-label w-50 mobileLable tableDataFont"> Estate name </span>
                                    <div class="w-50 d-flex">
                                        <span class="tableDataFont">
                                            {{ rowData[col.field] }}
                                        </span>
                                    </div>
                                </div>
                            </span>
                            <span *ngSwitchCase="'created_at'" class="d-md-block">
                                <span class="d-none d-sm-none d-md-block tableDataFont">{{
                                    rowData[col.field] | date: 'dd MMM yyyy'
                                }}</span>
                            </span>

                            <span *ngSwitchCase="'quantity'" class="d-md-block">
                                <span class="d-none d-sm-none d-md-block tableDataFont"
                                    >{{ rowData[col.field] }} {{ rowData['quantity_type'] }}</span
                                >
                            </span>
                            <span *ngSwitchCase="'origin'" class="d-md-block">
                                <span class="d-none d-sm-none d-md-block tableDataFont">{{ rowData[col.field] }}</span>
                                <div class="d-flex d-sm-flex d-md-none">
                                    <span class="prime-table-label w-50 mobileLable tableDataFont"> Origin </span>
                                    <div class="w-50 d-flex">
                                        <span class="tableDataFont">
                                            {{ rowData[col.field] }}
                                        </span>
                                    </div>
                                </div>
                            </span>

                            <span *ngSwitchCase="'species'" class="d-md-block">
                                <span class="d-none d-sm-none d-md-block tableDataFont">{{ rowData[col.field] }}</span>
                                <div class="d-flex d-sm-flex d-md-none">
                                    <span class="prime-table-label w-50 mobileLable tableDataFont"> Species </span>
                                    <div class="w-50 d-flex">
                                        <span class="tableDataFont">
                                            {{ rowData[col.field] }}
                                        </span>
                                    </div>
                                </div>
                            </span>
                            <span *ngSwitchDefault class="tableDataFont">
                                {{ rowData[col.field] }}
                            </span>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>

<!-- <section>
    <div class="bg-fff">
        <section class="select-order estate-orders">
            <div class="d-flex">
                <div class="cursor-pointer float-left mr-auto">
                    <img src="/assets/images/back-arrow1.png" alt="" />
                    <span class="back-ticket pl-2">{{ globals.languageJson?.back }} </span>
                </div>

                <button type="button" class="select_cancel float-right btn btn-link mr-2">
                    {{ globals.languageJson?.cancel }}
                </button>
                <button type="submit" class="continue-order float-right btn" (click)="continue()">
                    {{ globals.languageJson?.continue }}
                </button>
            </div>

            <h5 class="select-order-title pt-1">{{ globals.languageJson?.select_an_order }}</h5>
            <div class="please-select pt-1">Please select an estate order to create a roaster coffee batch for</div>

            <div class="row">
                <div class="mixups-tabs mt-3 pt-3 col-lg-12 col-md-12">
                    <div class="title-header d-inline desk_view_user">
                        <div class="d-inline border-order role-div col-sm-6" id="origin_id">
                            <p class="d-inline filter-text" *ngIf="estatetermOrigin == ''">
                                {{ globals.languageJson?.origin }}&nbsp;
                            </p>
                            <a
                                class="pointer-item"
                                [popover]="originTemplate"
                                placement="bottom"
                                container="body"
                                #pop4="bs-popover"
                            >
                                <p class="d-inline filter" *ngIf="estatetermOrigin == ''" (click)="toggleOrigin()">
                                    &nbsp;
                                    <img
                                        src="{{
                                            showOrigin ? 'assets/images/active-user.svg' : 'assets/images/user-down.svg'
                                        }}"
                                    />
                                </p>
                            </a>
                            <a
                                class="pointer-item"
                                [popover]="originTemplate"
                                placement="bottom"
                                container="body"
                                #pop5="bs-popover"
                            >
                                <p class="d-inline filter" *ngIf="estatetermOrigin != ''" (click)="toggleOrigin()">
                                    {{ estatetermOrigin }} &nbsp;<img
                                        src="{{
                                            showOrigin ? 'assets/images/active-user.svg' : 'assets/images/user-down.svg'
                                        }}"
                                    />
                                </p>
                            </a>
                        </div>
                        &nbsp;&nbsp;

                        <div class="d-inline border-order date-div col-sm-6">
                            <p class="d-inline filter-text">
                                {{ globals.languageJson?.date_range }} &nbsp;
                                <span *ngIf="showDateRange != ''">{{ showDateRange }}</span>
                            </p>

                            <a class="pointer-item">
                                <p class="d-inline filter">
                                    <p-calendar
                                        #calendar
                                        styleClass="only-icon"
                                        [(ngModel)]="rangeDates"
                                        selectionMode="range"
                                        dateFormat="dd.mm.yy"
                                        [readonlyInput]="true"
                                        [showButtonBar]="true"
                                        (onSelect)="filterDate($event)"
                                    ></p-calendar>
                                    &nbsp;
                                    <img
                                        src="assets/images/active-calender.png"
                                        alt=""
                                        (click)="openCalendar($event)"
                                    />
                                   
                                </p>
                            </a>
                        </div>
                        &nbsp;&nbsp;
                        <div class="d-inline display_div">
                            <div class="float-right border-order top-space" id="display_id">
                                <p class="d-inline filter-text">Display &#9679;</p>
                                <a
                                    class="pointer-item"
                                    [popover]="displayTemplate"
                                    placement="bottom"
                                    container="body"
                                    #pop6="bs-popover"
                                >
                                    <p class="d-inline filter" *ngIf="displayNumbers == '-1'" (click)="toggleDisplay()">
                                        &nbsp; &nbsp;
                                        <img
                                            src="{{
                                                showDisplay
                                                    ? 'assets/images/active-user.svg'
                                                    : 'assets/images/user-down.svg'
                                            }}"
                                        />
                                    </p>
                                </a>
                                <a
                                    class="pointer-item"
                                    [popover]="displayTemplate"
                                    placement="bottom"
                                    container="body"
                                    #pop7="bs-popover"
                                >
                                    <p class="d-inline filter" *ngIf="displayNumbers != '-1'" (click)="toggleDisplay()">
                                        {{ displayNumbers }}&nbsp; &nbsp;
                                        <img
                                            src="{{
                                                showDisplay
                                                    ? 'assets/images/active-user.svg'
                                                    : 'assets/images/user-down.svg'
                                            }}"
                                        />
                                    </p>
                                </a>
                            </div>
                        </div>
                    </div>


                    <div class="table-container estate-table mt-4">
                        
                        <table class="estate-boby-txt table">
                            <thead>
                                <tr class="estate-title">
                                    <th>
                                        
                                    </th>
                                    <th>Order ID</th>
                                    <th>Estate name</th>
                                    <th>Date ordered</th>
                                    <th>Orgin</th>
                                    <th>Variety</th>
                                    <th>Quantity</th>
                                    <th>Cupping Score</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let group of data; let i = index" class="estate-boby-txt">
                                    <td class="spacing-order" style="width: 40px">
                                        <label class="b-check">
                                            <input
                                                type="radio"
                                                name="sizecb[]"
                                                [value]="group.id"
                                                [checked]="i === 0"
                                                [(ngModel)]="group.state"
                                                (change)="onSelectionChange(group)"
                                            />
                                        </label>
                                    </td>

                                    <td>{{ group.id }}</td>
                                    <td>{{ group.estate_name | titlecase }}</td>
                                    <td>{{ group.created_at | date: 'dd-MM-yyyy' }}</td>
                                    <td>{{ group.origin | titlecase }}</td>
                                    <td>{{ group.variety | titlecase }}</td>
                                    <td>{{ group.quantity }}</td>

                                    <td>{{ group.cup_score | titlecase }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <ng-template #originTemplate>
                        <div id="status-content">
                            <ul class="list-group custom-popover">
                                <li class="list-group-item item-color">
                                    <a
                                        class="pointer-item"
                                        (click)="setOrigin(''); pop4.hide(); pop5.hide(); toggleOrigin()"
                                        >All</a
                                    >
                                </li>
                                <li class="list-group-item item-color">
                                    <a
                                        class="pointer-item"
                                        (click)="setOrigin('Colombia'); pop4.hide(); pop5.hide(); toggleOrigin()"
                                        >Colombia</a
                                    >
                                </li>
                                <li class="list-group-item item-color">
                                    <a
                                        class="pointer-item"
                                        (click)="setOrigin('Ethopia'); pop4.hide(); pop5.hide(); toggleOrigin()"
                                        >Ethopia</a
                                    >
                                </li>
                            </ul>
                        </div>
                    </ng-template>

                    

                    <ng-template #displayTemplate>
                        <div>
                            <ul class="list-group custom-popover">
                                <li class="list-group-item item-color">
                                    <a
                                        class="pointer-item"
                                        (click)="setDisplay('-1'); pop6.hide(); pop7.hide(); toggleDisplay()"
                                        >All</a
                                    >
                                </li>
                                <li class="list-group-item item-color">
                                    <a
                                        class="pointer-item"
                                        (click)="setDisplay('10'); pop6.hide(); pop7.hide(); toggleDisplay()"
                                        >10</a
                                    >
                                </li>
                                <li class="list-group-item item-color">
                                    <a
                                        class="pointer-item"
                                        (click)="setDisplay('25'); pop6.hide(); pop7.hide(); toggleDisplay()"
                                        >25</a
                                    >
                                </li>
                                <li class="list-group-item item-color">
                                    <a
                                        class="pointer-item"
                                        (click)="setDisplay('50'); pop6.hide(); pop7.hide(); toggleDisplay()"
                                        >50</a
                                    >
                                </li>
                                <li class="list-group-item item-color">
                                    <a
                                        class="pointer-item"
                                        (click)="setDisplay('100'); pop6.hide(); pop7.hide(); toggleDisplay()"
                                        >100</a
                                    >
                                </li>
                            </ul>
                        </div>
                    </ng-template>
                </div>
            </div>
        </section>
    </div>
</section> -->
