<section class="e-comm-catlog">
    <div class="bg-fff">
        <nav role="navigation" aria-labelledby="title-breadcrumb-1" class="breadcrumb1">
            <span id="title-breadcrumb-1" class="sr-only"></span>
            <ul class="bread-nav mb-md-0 pull-left">
                <li class="b-cum">
                    <a class="b-cum" routerLink="/">{{ globals.languageJson?.home }}</a
                    ><span class="padl-r" aria-hidden="true"
                        ><img class="group-img" src="/assets/images/arrow-1.png" alt=""
                    /></span>
                </li>
                <!-- <li class="b-cum">
                <a class="b-cum" routerLink="/features/your-services">Services</a><span class="padl-r" aria-hidden="true"><img class="group-img" src="/assets/images/arrow-1.png" alt=""></span>
            </li> -->
                <li class="b-cum c-pink">{{ globals.languageJson?.products }}</li>
            </ul>
            <div class="col-md-6 col-lg-4 pull-right search-div">
                <!-- <input type="text" name="search" class="search-raised desk_view_user" [(ngModel)]="term" placeholder="Search by order id, estate name" /> -->
                <button class="btn next" type="button" routerLink="/features/add-product">
                    {{ globals.languageJson?.add_product }}
                </button>
            </div>
        </nav>
        <section class="grading__total">
            <div class="row w-100 ml-0">
                <div class="green_grading_cont">
                    <h1>{{ globals.languageJson?.products }}</h1>
                    <!-- <h3 class="mb-2">Select service(s) that you want to cup</h3> -->
                </div>
            </div>
            <div class="row mt-4">
                <div class="col-lg-12">
                    <div class="pull-left mr-auto">
                        <div class="d-inline border-total status-div col-sm-6" id="origin_id">
                            <p class="d-inline filter-text" *ngIf="termOrigin == ''">
                                {{ globals.languageJson?.origins }}&nbsp;
                            </p>
                            <a
                                class="pointer-item"
                                [popover]="originTemplate"
                                placement="bottom"
                                container="body"
                                #poporigin1="bs-popover"
                            >
                                <p class="d-inline filter" *ngIf="termOrigin == ''" (click)="toggleOrigin()">
                                    &nbsp;
                                    <img
                                        src="{{
                                            showOrigin ? 'assets/images/down-arrow.svg' : 'assets/images/user-down.svg'
                                        }}"
                                    />
                                </p>
                            </a>
                            <a
                                class="pointer-item"
                                [popover]="originTemplate"
                                placement="bottom"
                                container="body"
                                #poporigin2="bs-popover"
                            >
                                <p class="d-inline filter" *ngIf="termOrigin != ''" (click)="toggleOrigin()">
                                    {{ termOrigin }}&nbsp;
                                    <img
                                        src="{{
                                            showOrigin ? 'assets/images/down-arrow.svg' : 'assets/images/user-down.svg'
                                        }}"
                                    />
                                </p>
                            </a>
                        </div>
                        &nbsp;&nbsp;
                        <div class="d-inline border-total status-div col-sm-6" id="type_id">
                            <p class="d-inline filter-text" *ngIf="termType == ''">
                                {{ globals.languageJson?.price_ranges }}&nbsp;
                            </p>
                            <a
                                class="pointer-item"
                                [popover]="typeTemplate"
                                placement="bottom"
                                container="body"
                                #poptype1="bs-popover"
                            >
                                <p class="d-inline filter" *ngIf="termType == ''" (click)="toggleType()">
                                    &nbsp;
                                    <img
                                        src="{{
                                            showType ? 'assets/images/down-arrow.svg' : 'assets/images/user-down.svg'
                                        }}"
                                    />
                                </p>
                            </a>
                            <a
                                class="pointer-item"
                                [popover]="typeTemplate"
                                placement="bottom"
                                container="body"
                                #poptype2="bs-popover"
                            >
                                <p class="d-inline filter" *ngIf="termType != ''" (click)="toggleType()">
                                    {{ termType }}&nbsp;
                                    <img
                                        src="{{
                                            showType ? 'assets/images/down-arrow.svg' : 'assets/images/user-down.svg'
                                        }}"
                                    />
                                </p>
                            </a>
                        </div>
                        &nbsp;&nbsp;
                        <div class="d-inline border-total status-div col-sm-6" id="status_id">
                            <p class="d-inline filter-text" *ngIf="termStatus == ''">
                                {{ globals.languageJson?.status }}&nbsp;
                            </p>
                            <a
                                class="pointer-item"
                                [popover]="allTemplate"
                                placement="bottom"
                                container="body"
                                #pop2="bs-popover"
                            >
                                <p class="d-inline filter" *ngIf="termStatus == ''" (click)="toggleStatus()">
                                    &nbsp;
                                    <img
                                        src="{{
                                            showVar ? 'assets/images/down-arrow.svg' : 'assets/images/user-down.svg'
                                        }}"
                                    />
                                </p>
                            </a>
                            <a
                                class="pointer-item"
                                [popover]="allTemplate"
                                placement="bottom"
                                container="body"
                                #pop="bs-popover"
                            >
                                <p class="d-inline filter" *ngIf="termStatus != ''" (click)="toggleStatus()">
                                    {{ termStatus }}&nbsp;
                                    <img
                                        src="{{
                                            showVar ? 'assets/images/down-arrow.svg' : 'assets/images/user-down.svg'
                                        }}"
                                    />
                                </p>
                            </a>
                        </div>
                    </div>
                    <div class="pull-right ml-auto">
                        <input
                            type="text"
                            name="search"
                            class="search-raised desk_view_user"
                            [(ngModel)]="term"
                            placeholder="Search for products"
                        />
                    </div>
                </div>
            </div>
            <div class="table-container mb-2 mt-4">
                <div class="table-responsive">
                    <table class="table">
                        <thead class="table-header">
                            <tr class="header-row">
                                <th>
                                    <label class="customcheckbox m-b-20">
                                        <input
                                            type="checkbox"
                                            id="mainCheckbox"
                                            [checked]="isAllChecked()"
                                            (change)="checkAll($event)"
                                        />
                                        <span class="checkmark head-check"></span>
                                    </label>
                                </th>
                                <th scope="col">{{ globals.languageJson?.product_name }}</th>
                                <th scope="col">
                                    {{ globals.languageJson?.origin }}
                                </th>
                                <th scope="col">
                                    {{ globals.languageJson?.estate_name }}
                                </th>
                                <th scope="col">{{ globals.languageJson?.roast_level }}</th>
                                <th scope="col">{{ globals.languageJson?.weight }}</th>
                                <th scope="col">
                                    {{ globals.languageJson?.status }}
                                </th>
                                <th scope="col">{{ globals.languageJson?.price }}</th>
                                <th scope="col">{{ globals.languageJson?.actions }}</th>
                            </tr>
                        </thead>
                        <tbody class="customtable">
                            <tr
                                class="ticket-boby-txt"
                                *ngFor="
                                    let item of mainData
                                        | filter: term
                                        | filter: termStatus
                                        | filter: termOrigin
                                        | filter: termType
                                "
                            >
                                <td>
                                    <label class="customcheckbox">
                                        <input
                                            type="checkbox"
                                            class="listCheckbox"
                                            name="sizecb[]"
                                            value="{{ item.id }}"
                                            [(ngModel)]="item.state"
                                        />
                                        <span class="checkmark head-check"></span>
                                    </label>
                                </td>

                                <td>
                                    <span class="product-div">
                                        <img class="img-file" src="{{ item.featured_image }}" />
                                    </span>
                                    <span class="product-name-div">
                                        <p class="mb-1" style="width: 150px; word-wrap: break-word">{{ item.name }}</p>
                                        <div>
                                            <img src="assets/images/star-1.png" alt="" /><span class="pl-2">{{
                                                item.rating
                                            }}</span>
                                        </div>
                                    </span>
                                </td>
                                <td>{{ item.origin }}</td>
                                <td>{{ item.estate_name }}</td>
                                <td>{{ item.roast_level }}</td>
                                <td>{{ item.weight }} {{ item.weight_unit }}</td>
                                <td>{{ item.status }}</td>

                                <td>
                                    {{ item.price }}
                                </td>
                                <td>
                                    <span>
                                        <a
                                            class="fnt-muli view-details"
                                            [routerLink]="['/features/product/' + item.id]"
                                            >{{ globals.languageJson?.edit_product }}</a
                                        >
                                        <span>
                                            <a
                                                class="menu-arrow"
                                                [popover]="poplistTemplate"
                                                placement="left"
                                                [outsideClick]="true"
                                                #pop="bs-popover"
                                            >
                                                <img
                                                    class="ellipse-image pl-3"
                                                    src="assets/images/more-opns-file.png"
                                                    alt=""
                                                />
                                            </a>
                                            <ng-template #poplistTemplate>
                                                <div id="popover-mobile-content">
                                                    <ul class="list-group custom-popover">
                                                        <li class="list-group-item">
                                                            <a
                                                                class="pointer-item"
                                                                (click)="
                                                                    openDeleteModal(deleteTemplate, item.id); pop.hide()
                                                                "
                                                                >{{ globals.languageJson?.delete }}</a
                                                            >
                                                        </li>
                                                    </ul>
                                                </div>
                                            </ng-template>
                                        </span>
                                    </span>
                                </td>
                            </tr>
                            <tr class="odd" *ngIf="odd">
                                <td valign="top" colspan="11" class="dataTables_empty">No data available in table</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </div>
</section>

<ng-template #allTemplate>
    <div id="status-content">
        <ul class="list-group">
            <li class="list-group-item item-color">
                <a class="pointer-item" (click)="setStatus(''); pop.hide(); pop2.hide(); toggleStatus()">All</a>
            </li>
            <li class="list-group-item item-color">
                <a class="pointer-item" (click)="setStatus('Active'); pop.hide(); pop2.hide(); toggleStatus()"
                    >Active</a
                >
            </li>
            <li class="list-group-item item-color">
                <a class="pointer-item" (click)="setStatus('Disabled'); pop.hide(); pop2.hide(); toggleStatus()"
                    >Disabled</a
                >
            </li>
        </ul>
    </div>
</ng-template>
<ng-template #typeTemplate>
    <div id="status-content">
        <ul class="list-group">
            <li class="list-group-item item-color">
                <a class="pointer-item" (click)="setType(''); poptype1.hide(); poptype2.hide(); toggleType()">All</a>
            </li>
            <li class="list-group-item item-color">
                <a class="pointer-item" (click)="setType('$0-$500'); poptype1.hide(); poptype2.hide(); toggleType()"
                    >$0-$500</a
                >
            </li>
            <li class="list-group-item item-color">
                <a class="pointer-item" (click)="setType('$500-$1000'); poptype1.hide(); poptype2.hide(); toggleType()"
                    >$500-$1000</a
                >
            </li>
        </ul>
    </div>
</ng-template>
<ng-template #originTemplate>
    <div id="status-content">
        <ul class="list-group">
            <li class="list-group-item item-color">
                <a class="pointer-item" (click)="setOrigin(''); poporigin1.hide(); poporigin2.hide(); toggleOrigin()"
                    >All</a
                >
            </li>
            <li class="list-group-item item-color">
                <a
                    class="pointer-item"
                    (click)="setOrigin('Colombia'); poporigin1.hide(); poporigin2.hide(); toggleOrigin()"
                    >Colombia</a
                >
            </li>
            <li class="list-group-item item-color">
                <a
                    class="pointer-item"
                    (click)="setOrigin('Ethiopia'); poporigin1.hide(); poporigin2.hide(); toggleOrigin()"
                    >Ethiopia</a
                >
            </li>
        </ul>
    </div>
</ng-template>
<ng-template #deleteTemplate>
    <div class="modal-body mt-5 mb-5 text-center fnt-muli">
        <div><img src="assets/images/delete-role.svg" alt="" /></div>
        <div class="fnt-play fnt-24 fnt-bold oh__text mt-2">Oh noh :(</div>
        <div class="fnt-muli fnt-16 fnt-md-18 fnt-normal delete__text mt-2 pb-3">
            You sure you really want to delete this?
        </div>
        <div class="mt-4">
            <button class="cancel-btn" (click)="modalRef.hide()">{{ globals.languageJson?.cancel }}</button>
            <button class="btn delete-btn ml-3" (click)="modalRef.hide(); deleteproduct(deleteId)">
                {{ globals.languageJson?.delete }}
            </button>
        </div>
    </div>
</ng-template>
