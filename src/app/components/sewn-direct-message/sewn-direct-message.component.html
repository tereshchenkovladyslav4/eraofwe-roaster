<section>

    <!--Chat Main screen with accounts-->
    <div class="chat mt-chat " data-element="chat"
         [ngClass]="{'open':showChat , 'expand-active': this.showChat && this.openedThread && this.expandView }">
        <!--Remove expand mode-->
        <div class="chat-head">
            <button class="back-to-shrinkMode" (click)="expandView=false">
                <img src="assets/images/dm-back-arrow.svg">
            </button>
        </div>



        <!--Chat body-->
        <div class="chat-body ">

            <!--Expand Mode div-->
            <div class="chat-body__expand">
                <!-- <ng-template [ngTemplateOutlet]="liveChatRef"></ng-template> -->
            </div>

            <!--Chat box witn live chat and account sections-->
            <div class="chat-box clearfix" data-element="chat-box">
                <div class="chat-accounts position-relative">
                    <div data-element="chat-account-head" class="chat-accounts__head clearfix">
                        <h4 class="chat-title">{{globals.languageJson?.messaging}}</h4>

                        <!--Chat control-->
                        <div class="chat-control">
                            <div class="chat-control__expand" (click)="expandView=true ">
                                <img src="assets/images/dm-expand.svg">
                            </div>
                            <div class="chat-control__close" (click)="closePanel();">
                                <img src="assets/images/dm-close.svg">
                            </div>
                        </div>

                    </div>

                    <!---Live chats at particular account-->
                    <!-- <ng-template #liveChatRef> -->
                    <div data-element="live-chat" class="live-chat" [ngClass]="{'active' : openedThread }">
                        <div class="live-caht__head clearfix" data-element="live-chat-head">
                            <div class="live-account-profile">
                                <button class="back-to-accounts" (click)="openedThread=null ">
                                    <img src="assets/images/dm-back-arrow.svg">
                                </button>

                                <div class="d-inline-block profile-pic">

                                    <span class="profile-pic__item bg-profile"
                                          [style.backgroundImage]="openedThread?.computed_targetedUser.computed_profile_dp"></span>
                                    <span *ngIf="openedThread?.computed_targetedUser.online"
                                          class="live-account"></span>
                                    <span *ngIf="!openedThread?.computed_targetedUser.online"
                                          class="offline-account"></span>
                                </div>
                                <div class="chat-profile clearfix">
                                    <div class="chat-profile__name d-inline-block">
                                        <h5 class="name"> {{openedThread?.computed_targetedUser.computed_fullname}}
                                        </h5>
                                        <span
                                              class="status">{{ openedThread?.computed_targetedUser.computed_organization_name}}</span>
                                        <span *ngIf="!openedThread?.computed_targetedUser.online"
                                              class="status last-seen">Last Seen at
                                            {{openedThread?.computed_targetedUser?.computed_lastseen || ''}} </span>
                                    </div>


                                </div>

                                <div class="chat-seeting">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </div>
                            </div>
                        </div>


                        <!--Live Chats are going here-->
                        <div class="live-chat-message-body position-relative" data-element="live-chat-message-body">

                        </div>

                        <!--Send Message div-->
                        <div>
                            <form class="messag-form position-relative" data-element="message-form">

                                <div class="offensive-lang">
                                    <span>Use of offensive language is strictly prohibited...</span>
                                </div>
                                <div class="img-container">
                                    <span class="img-container__remove">&#10008;</span>
                                </div>

                                <div class="chat-inputs">
                                    <label class="chat-inputs__img">
                                        <img src="assets/images/dm-img-upload.svg">
                                        <input type="file" class="files">

                                    </label>
                                    <textarea type="text" rows="1" class="chat-inputs__text"
                                              placeholder="Type something.."></textarea>
                                    <div class="send-message">
                                        <button type="button" class="send-message__btn">

                                            <img src="assets/images/dm-send2.svg">
                                        </button>
                                    </div>

                                </div>
                                <div class="send-message">
                                    <button type="button" class="send-message__btn">
                                        <span>send</span>
                                        <img src="assets/images/dm-send.svg">
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- </ng-template> -->

                    <!-- <ng-template [ngTemplateOutlet]="liveChatRef"></ng-template> -->

                    <!--Account Setting-->

                    <div data-element="account-setting" class="account-setting">
                        <div class="account-setting__back">
                            <div class="back-to-conversation">
                                <img src="assets/images/dm-back-arrow.svg">
                                <span>Back to Conversation list</span>
                            </div>

                            <div class="account-setting__profile clearfix">
                                <div class="set-profile">
                                    <img src="assets/images/dm-account-profile.png">
                                </div>

                                <div class="set-profile-name">
                                    <h5 class="name">Umesh</h5>
                                    <span class="status">Coffee Estate</span>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!--All accounts body with search-->
                    <div data-element="account-body" class="chat-accounts__body"
                         [ngClass]="{'active' :  !openedThread }">
                        <div class="search-account">
                            <img src="assets/images/dm-search.svg">
                            <input class="search-account__input" type="search" placeholder="Search Messages">
                        </div>

                        <div class="chat-accounts__name">

                            <!--Account-->
                            <div class="clearfix account" *ngFor="let thread of threadList"
                                 (click)="openedThread = thread">
                                <div class="d-inline-block profile-pic">
                                    <span class="profile-pic__item bg-profile"
                                          [style.backgroundImage]="thread.computed_targetedUser.computed_profile_dp"></span>
                                    <span *ngIf="thread.computed_targetedUser.online" class="live-account"></span>
                                    <span *ngIf="!thread.computed_targetedUser.online" class="offline-account"></span>
                                </div>
                                <div class="chat-profile clearfix">
                                    <div class="chat-profile__name d-inline-block">
                                        <h5 class="name">{{thread.computed_targetedUser.computed_fullname}}</h5>
                                        <span
                                              class="status">{{ thread.computed_targetedUser.computed_organization_name}}</span>
                                    </div>
                                    <div class="chat-profile__time ">
                                        <span>{{thread.computed_createdAt}}</span>
                                    </div>
                                    <div class="chat-messaged">
                                        <p class="chat-messaged__text">{{thread.computed_lastActivityText}}
                                        </p>
                                        <span *ngIf="thread.unread && thread.unread > 0"
                                              class="chat-messaged__total">{{thread.unread}}</span>
                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- <div class="start-chat">
        <span>Start Chat</span>
    </div> -->

</section>
