<div class="form-container">
    <div class="row pl-2 pr-2 mt-4">
        <div class="col-md-12 pl-2 pr-2 pb-3 d-none d-md-block d-lg-none">
            <ng-template *ngTemplateOutlet="rightSidePanel"></ng-template>
        </div>
        <div class="col-lg-8 col-12 pt-0 pl-2 pr-2">
            <div class="border-md-main br-4 p-lg-4 p-md-3">
                <form [formGroup]="aboutForm">
                    <div class="row border-md-main border-md-none br-6 mt-3 m-0 p-0 p-md-0 mr-md-0 ml-md-0">
                        <div
                            class="sewn-form-field col-md-6 m-0 pl-0 pr-md-2 pr-0 pt-0 pt-md-0"
                            [ngClass]="[isSaveMode ? 'col-12' : 'col-6']"
                        >
                            <label
                                [ngClass]="[isSaveMode ? 'fnt-14' : 'fnt-12 fnt-md-14 text-clr588']"
                                for="founded_in"
                            >
                                {{ 'founded_in' | translate }}
                                <span class="star" *ngIf="isSaveMode">*</span>
                            </label>
                            <input
                                *ngIf="isSaveMode"
                                id="founded_in"
                                type="number"
                                limit="4"
                                pInputText
                                name="founded_in"
                                formControlName="founded_on"
                                placeholder="Please enter founded year"
                            />
                            <p class="fnt-14 fnt-600 text-clr334 mb-1" *ngIf="isEditMode">
                                {{ roasteryProfileService.organizationProfile?.founded_on }}
                            </p>
                            <small *ngIf="isControlHasError('founded_on', 'required')" class="p-error">
                                {{ 'required' | translate }}
                            </small>
                        </div>

                        <div
                            class="sewn-form-field col-md-6 mt-md-0 mb-0 pl-0 pr-0 pl-md-2"
                            [ngClass]="[isSaveMode ? 'col-12 mt-3' : 'col-6 mt-0']"
                        >
                            <label
                                [ngClass]="[isSaveMode ? 'fnt-14' : 'fnt-12 fnt-md-14 text-clr588']"
                                for="owner_name"
                            >
                                {{ 'manager' | translate }}<span class="star" *ngIf="isSaveMode">*</span>
                            </label>
                            <input
                                *ngIf="isSaveMode"
                                pInputText
                                id="owner_name"
                                type="text"
                                required
                                name="owner_name"
                                formControlName="owner_name"
                                placeholder="Please enter owner name"
                            />
                            <p class="fnt-14 fnt-600 text-clr334 mb-1" *ngIf="isEditMode">
                                {{ roasteryProfileService.organizationProfile?.owner_name }}
                            </p>
                            <small *ngIf="isControlHasError('owner_name', 'required')" class="p-error">
                                {{ 'required' | translate }}
                            </small>
                        </div>
                    </div>

                    <div
                        class="
                            row
                            border-md-main border-md-none
                            br-4
                            mb-3 mb-md-45
                            m-0
                            mt-3 mt-md-0
                            p-0 p-md-0
                            mr-md-0
                            ml-md-0
                        "
                    >
                        <div class="sewn-form-field col-md-12 mt-md-45 p-0 mb-0">
                            <label [ngClass]="[isSaveMode ? 'fnt-14' : 'fnt-12 fnt-md-14 text-clr588']" for="summary"
                                >{{ 'roastery_summary' | translate }}
                                <span class="pull-right text-clr588" *ngIf="isSaveMode">
                                    {{ aboutForm.get('description').value | wordCount }}/150 words
                                </span>
                            </label>
                            <textarea
                                *ngIf="isSaveMode"
                                appWordLimit
                                [limit]="150"
                                pInputTextarea
                                class="w-100"
                                id="summary"
                                name="summary"
                                rows="5"
                                formControlName="description"
                                placeholder="Tell us and to our users about who you are as a company!"
                            >
                            </textarea>
                            <small *ngIf="isControlHasError('description', 'maxWordCount')" class="p-error">
                                Description shouldn't be over 150 words
                            </small>
                            <p class="fnt-14 fnt-600 text-clr334" *ngIf="isEditMode">
                                {{ roasteryProfileService.organizationProfile?.description }}
                            </p>
                        </div>
                    </div>
                    <hr class="mb-4 mt-4" *ngIf="isSaveMode" />

                    <div class="row mt-md-45" *ngIf="isSaveMode">
                        <div class="col-12 mb-3 mb-md-45">
                            <p class="fnt-18 fnt-bold text-clr334 w-100 mb-1">
                                {{ 'employee_details' | translate }}
                            </p>
                            <p class="fnt-14 fnt-600 text-clr588 w-100 m-0">{{ 'give_overview_text' | translate }}.</p>
                        </div>
                    </div>

                    <div class="row mb-md-3" *ngIf="isSaveMode">
                        <div class="sewn-form-field col-12 col-md-6 pr-md-2 mb-3 mb-md-4">
                            <label for="employee_nos">
                                {{ 'total_number_employees' | translate }}
                                <span class="star">*</span>
                            </label>
                            <input
                                id="employee_nos"
                                type="number"
                                pInputText
                                required
                                name="employee_nos"
                                formControlName="total_employees"
                                placeholder="Please enter no. of employees"
                            />
                            <small class="p-error" *ngIf="isControlHasError('total_employees', 'required')">
                                {{ 'required' | translate }}
                            </small>
                            <small class="p-error" *ngIf="roasteryProfileService.invalidSumEmployee">
                                Please enter the correct no
                            </small>
                        </div>
                        <div class="sewn-form-field col-12 col-md-6 pl-md-2 mb-3 mb-md-4">
                            <label for="employee_avg">
                                {{ 'average_employee_age' | translate }}
                                <span class="star">*</span>
                            </label>
                            <input
                                id="employee_avg"
                                type="number"
                                pInputText
                                required
                                name="employee_avg"
                                formControlName="avg_employee_age"
                                placeholder="Please enter employee avg. age"
                            />
                            <small class="p-error" *ngIf="isControlHasError('avg_employee_age', 'required')">
                                {{ 'required' | translate }}
                            </small>
                        </div>
                    </div>
                    <span class="fnt-14 fnt-bold text-clr334" *ngIf="isSaveMode">
                        {{ 'gender_distribution' | translate }}
                        <span class="star">*</span>
                    </span>
                    <div class="row" *ngIf="isSaveMode">
                        <div class="sewn-form-field col-12 col-md-6 pr-md-2 mb-3 mb-md-4">
                            <label for="female_num">
                                {{ 'total_number_female_employees' | translate }}
                                <span class="star">*</span>
                            </label>
                            <input
                                id="female_num"
                                pInputText
                                type="number"
                                required
                                name="female_num"
                                formControlName="female_employee_count"
                                placeholder="Please enter the number of female employees"
                            />
                            <small class="p-error" *ngIf="roasteryProfileService.invalidSumEmployee">
                                Please enter the correct no
                            </small>
                        </div>
                        <div class="sewn-form-field col-12 col-md-6 pl-md-2 mb-3 mb-md-4">
                            <label for="male_num">
                                {{ 'total_number_male_employees' | translate }}
                                <span class="star">*</span>
                            </label>
                            <input
                                id="male_num"
                                pInputText
                                type="number"
                                required
                                name="male_num"
                                formControlName="male_employee_count"
                                placeholder="Please enter the number of male employees"
                            />
                            <small class="p-error" *ngIf="roasteryProfileService.invalidSumEmployee">
                                Please enter the correct no
                            </small>
                        </div>
                    </div>

                    <div class="d-block d-md-none mb-3 mb-md-4">
                        <ng-template *ngTemplateOutlet="rightSidePanel"></ng-template>
                    </div>

                    <!-- company details -->

                    <hr class="d-none d-lg-block" />
                    <div class="row border-md-main border-md-none br-4 mt-md-45 mb-2 m-0 p-0 p-md-0">
                        <div class="col-9 mb-3 mb-md-45 p-0">
                            <p class="fnt-18 fnt-bold text-clr334 w-100 mb-1">Company details</p>
                            <p class="fnt-14 fnt-600 text-clr588 w-100 m-0" *ngIf="isSaveMode">
                                Enter your VAT and customer ID for billing purposes
                            </p>
                        </div>
                        <div class="col-3 text-right p-0" *ngIf="isSaveMode">
                            <p class="fnt-14 fnt-600 text-clr588 w-100 mb-2 text-clr588">Private</p>
                            <p-inputSwitch
                                styleClass="custom-input-switch"
                                formControlName="company_details_public"
                            ></p-inputSwitch>
                        </div>

                        <div
                            class="sewn-form-field col-md-6 p-0 pr-md-2 mb-3 mb-md-4"
                            [ngClass]="[isSaveMode ? 'col-12' : 'col-6']"
                        >
                            <label [ngClass]="[isSaveMode ? 'fnt-14' : 'fnt-12 fnt-md-14 text-clr588']" for="vat_nos"
                                >VAT number<span class="star" *ngIf="isSaveMode">*</span></label
                            >
                            <input
                                *ngIf="isSaveMode"
                                id="vat_nos"
                                type="text"
                                pInputText
                                required
                                name="vat_nos"
                                formControlName="vat_number"
                                placeholder="Please VAT Number"
                            />
                            <p class="fnt-14 fnt-600 text-clr334 mb-0" *ngIf="isEditMode">
                                {{ roasteryProfileService.organizationProfile?.vat_number }}
                            </p>
                            <small class="p-error" *ngIf="isControlHasError('vat_number', 'required')">
                                {{ 'required' | translate }}
                            </small>
                        </div>
                        <div
                            class="sewn-form-field col-md-6 p-0 pl-md-2 mb-0 mb-md-4"
                            [ngClass]="[isSaveMode ? 'col-12' : 'col-6']"
                        >
                            <label for="cmpy_rid" [ngClass]="[isSaveMode ? 'fnt-14' : 'fnt-12 fnt-md-14 text-clr588']"
                                >Company registration ID<span class="star" *ngIf="isSaveMode">*</span></label
                            >
                            <input
                                *ngIf="isSaveMode"
                                id="cmpy_rid"
                                pInputText
                                type="text"
                                required
                                name="cmpy_rid"
                                formControlName="registration_id"
                                placeholder="Please enter employee avg. age"
                            />
                            <p class="fnt-14 fnt-600 text-clr334 mb-0" *ngIf="isEditMode">
                                {{ roasteryProfileService.organizationProfile?.registration_id }}
                            </p>
                            <small class="p-error" *ngIf="isControlHasError('registration_id', 'required')">
                                {{ 'required' | translate }}
                            </small>
                        </div>
                    </div>

                    <hr class="mt-4 mb-4 mt-md-3" />

                    <div class="mt-md-45 mb-4">
                        <p class="fnt-18 fnt-bold text-clr334 w-100 mb-1">
                            {{ 'roastery_capabilities' | translate }}
                        </p>
                        <p class="fnt-14 fnt-600 text-clr588 w-100 m-0" *ngIf="isSaveMode">
                            {{ 'tell_us_capability_text' | translate }}.
                        </p>
                        <p class="fnt-14 fnt-600 text-clr588 w-100 m-0" *ngIf="isEditMode">
                            {{ 'our_roastery_capabilities_storage' | translate }}.
                        </p>
                    </div>

                    <div class="row" *ngIf="isSaveMode">
                        <div class="sewn-form-field col-12 col-md-6 pr-md-2 mb-3 mb-md-4 position-relative">
                            <label for="capacity">
                                {{ 'roastery_capacity' | translate }}
                                <span class="star">*</span>
                            </label>

                            <div class="input-and-select gray">
                                <p-inputNumber
                                    type="number"
                                    formControlName="capacity"
                                    placeholder="Enter capacity"
                                ></p-inputNumber>
                                <p-dropdown
                                    [options]="QUANTIRY_UNIT_LIST"
                                    [autoDisplayFirst]="false"
                                    formControlName="capacity_unit"
                                    placeholder="{{ 'select_unit' | translate }}"
                                ></p-dropdown>
                                <small *ngIf="isControlHasError('capacity', 'required')" class="p-error">
                                    {{ 'required' | translate }}
                                </small>
                                <small *ngIf="isControlHasError('capacity_unit', 'required')" class="p-error">
                                    {{ 'select_unit' | translate }}
                                </small>
                            </div>
                        </div>

                        <div class="sewn-form-field col-12 col-md-6 pl-md-2">
                            <label for="capabilities">
                                {{ 'capabilities' | translate }}
                                <span class="star">*</span>
                            </label>
                            <input
                                id="capabilities"
                                type="text"
                                pInputText
                                required
                                name="capabilities"
                                formControlName="capabilities"
                                placeholder="Eg. Hand roasted, Blended, Mocha-Java"
                            />
                            <small class="p-error" *ngIf="isControlHasError('capabilities', 'required')">
                                {{ 'required' | translate }}
                            </small>
                        </div>
                    </div>

                    <div class="row mb-4 mb-md-425" *ngIf="isEditMode">
                        <div class="col-lg-12">
                            <div class="d-flex border-md-main br-4 px-md-3 py-md-4">
                                <div class="pr-25 pr-md-3 border-right">
                                    <label class="fnt-600 text-clr588 mb-25 mb-md-1">
                                        {{ 'roastery_capacity' | translate }}
                                    </label>
                                    <div class="fnt-md-38 fnt-28 fnt-bold text-clr334">
                                        {{ roasteryProfileService.organizationProfile?.capacity | number }}
                                        {{ roasteryProfileService.organizationProfile?.capacity_unit }}
                                    </div>
                                </div>
                                <div class="fnt-600 text-clr334 pl-25 pl-md-3 pt-md-3">
                                    {{ roasteryProfileService.organizationProfile?.capabilities }}
                                </div>
                            </div>
                        </div>
                    </div>

                    <hr class="mt-2 mb-2" />
                </form>
                <!-- Brand Profile -->

                <input
                    type="file"
                    class="file-inpt"
                    hidden
                    #brandImageInput
                    (click)="setFormat($event)"
                    (change)="handleRoasterFile($event)"
                />
                <ng-container *ngIf="filteredBrands?.length || isSaveMode">
                    <!-- new brand form -->
                    <div class="row mt-md-45 mb-4 mb-md-45">
                        <div class="col-12">
                            <p class="fnt-18 fnt-bold text-clr334 w-100 mt-2 mt-md-0 mb-1">
                                {{ 'brands' | translate }}
                            </p>
                            <p class="fnt-14 fnt-600 text-clr588 w-100 m-0" *ngIf="isSaveMode">
                                {{ 'list_down_brands' | translate }}.
                            </p>
                        </div>
                    </div>
                    <div *ngIf="isSaveMode && isAddBrandMode">
                        <ng-template *ngTemplateOutlet="brandFormTemplate"></ng-template>
                    </div>
                    <!-- end new brand form -->
                    <hr class="mt-2 mb-4 mb-md-45" *ngIf="isSaveMode && isAddBrandMode" />

                    <div class="mb-3" *ngFor="let brand of filteredBrands">
                        <div
                            class="brand-item-container"
                            *ngIf="(isEditBrandMode && brand.id !== toEditBrand?.id) || !isEditBrandMode"
                        >
                            <div
                                class="border-md-main br-4 brand-item pl-md-3 p-md-4 d-flex align-items-center"
                                [ngClass]="{ 'mr-3125': isSaveMode }"
                            >
                                <div class="mr-3">
                                    <img [src]="brand.url" class="brand-image" />
                                </div>
                                <div class="brand-meta-container">
                                    <p class="fnt-16 fnt-bold text-clr334 mb-2">
                                        {{ brand.name }}
                                    </p>
                                    <p class="fnt-14 fnt-600 text-clr334">
                                        {{ brand.description }}
                                    </p>
                                </div>
                            </div>
                            <div class="brand-edit-btn" [ngClass]="{ 'visiblity-hidden': !isSaveMode }">
                                <a class="view-order cursor-pointer hover-underline" (click)="editBrand(brand)">
                                    {{ 'edit' | translate }}
                                </a>
                            </div>
                        </div>
                        <div *ngIf="isSaveMode && isEditBrandMode && brand.id === toEditBrand.id">
                            <ng-template *ngTemplateOutlet="brandFormTemplate"></ng-template>
                        </div>
                        <div *ngIf="!brands?.length" class="text-center p-2">
                            <span> No brands found.</span>
                        </div>
                    </div>

                    <div class="row" *ngIf="isSaveMode && !isAddBrandMode">
                        <div class="col-12 mt-4 mt-md-2 mb-4 mb-md-4 text-left">
                            <a class="add-link" href="javascript:void(0);" (click)="addBrandProfileMode()">
                                <span class="fnt-14 fnt-bold add-text ml-4">Add another brand</span>
                            </a>
                        </div>
                    </div>

                    <hr [ngClass]="[isAddBrandMode ? 'mt-4 mt-md-45 mb-4 mb-md-45' : 'mt-0 mb-0']" />
                </ng-container>

                <form [formGroup]="membersForm" novalidate>
                    <div class="" *ngIf="isSaveMode" formArrayName="members">
                        <div class="row mt-3 mb-md-4 mb-3">
                            <div class="col-12">
                                <p class="fnt-18 fnt-bold text-clr334 w-100 mb-1">
                                    {{ 'contacts' | translate }}<span class="star">*</span>
                                </p>
                                <p class="fnt-14 fnt-600 text-clr588 w-100 m-0 mb-0">
                                    {{ 'list_contacts' | translate }}!
                                </p>
                            </div>
                        </div>
                        <ng-container *ngFor="let member of members.controls; let i = index">
                            <div class="row mb-1">
                                <div class="sewn-form-field col-md-6 mb-3 mb-md-3">
                                    <p-dropdown
                                        [options]="usersOptions(i)"
                                        optionLabel="name"
                                        optionValue="value"
                                        [autoDisplayFirst]="false"
                                        [formControlName]="i"
                                    ></p-dropdown>
                                </div>
                                <div class="add-partner mb-3 mb-md-0 mt-md-3 col-12 col-md-6 p-md-0 text-left">
                                    <span class="ml-2 brown-cta" (click)="deleteMember(i)">
                                        {{ 'remove' | translate }} {{ 'contact' | translate }}
                                    </span>
                                </div>
                            </div>
                        </ng-container>
                        <div class="row mt-3" *ngIf="assignRow">
                            <div class="sewn-form-field col-md-6">
                                <label for="emp_name">{{ 'select_employee' | translate }}</label>
                                <p-dropdown
                                    class="w-100"
                                    id="emp_name"
                                    name="emp_name"
                                    [options]="usersOptions()"
                                    optionLabel="name"
                                    optionValue="value"
                                    [autoDisplayFirst]="false"
                                    [ngModelOptions]="{ standalone: true }"
                                    [(ngModel)]="employeeId"
                                ></p-dropdown>
                            </div>
                            <div class="col-12 col-md-6 mt-md-4 p-md-0 add-contact-group">
                                <button
                                    type="submit"
                                    pButton
                                    class="btn-raised ml-md-2 mr-2"
                                    [label]="'add_contact' | translate | titlecase"
                                    [disabled]="!employeeId"
                                    (click)="addContact()"
                                ></button>
                                <button
                                    pButton
                                    type="submit"
                                    class="btn-stroked"
                                    (click)="cancelAssign()"
                                    [label]="'cancel' | translate"
                                ></button>
                            </div>
                        </div>
                        <div class="add-brand-div mt-3 mb-3 text-left">
                            <a class="brand-tag add-link" (click)="showContact()">
                                <span class="add-text ml-4">{{ 'add_another_contact' | translate }}</span>
                            </a>
                        </div>
                    </div>
                </form>

                <div class="d-block" *ngIf="isEditMode">
                    <div class="employer mt-4">
                        <p class="fnt-18 fnt-bold text-clr334 w-100 mb-1">{{ 'contacts' | translate }}</p>
                        <p class="fnt-14 fnt-600 text-clr588 w-100 m-0 mb-4">
                            {{ 'list_down_top_employees' | translate }}
                        </p>
                        <div class="row p-0">
                            <div
                                class="col-lg-3 col-md-3 col-sm-6 col-6 mb-3 pl-3 pr-3"
                                *ngFor="let contact of roasteryProfileService.topContacts"
                            >
                                <div class="employ-profile">
                                    <app-user-detail
                                        [userId]="contact?.user_id"
                                        [imageUrl]="contact?.profile_image_thumb_url"
                                        [orgType]="OrgType.ROASTER"
                                        shape="rectangle"
                                        type="contact"
                                        size="150"
                                    ></app-user-detail>
                                    <div class="profile-des">
                                        <p class="fnt-16 fnt-bold mb-1 mt-3 text-clr334">
                                            {{ contact.name | titlecase }}
                                        </p>
                                        <p class="fnt-14 fnt-500 text-clr588 mb-0">
                                            {{ contact.roles[0] || '-' }}
                                        </p>
                                    </div>
                                    <div class="mt-3">
                                        <span class="btn-trans-icon message-icon" (click)="openChat(contact)">
                                            {{ 'message' | translate }}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-12 pt-0 pl-2 pr-2 d-none d-lg-block">
            <ng-template *ngTemplateOutlet="rightSidePanel"></ng-template>
        </div>
    </div>
</div>

<ng-template #brandButtonGroup>
    <div class="add-brand-btns d-flex float-right float-md-none">
        <a
            *ngIf="!isEditBrandMode"
            class="view-order cursor-pointer mr-3"
            href="javascript:void(0);"
            (click)="addNewBrand()"
        >
            {{ 'save' | translate }}
        </a>
        <a
            *ngIf="isEditBrandMode"
            class="view-order cursor-pointer mr-3"
            href="javascript:void(0);"
            (click)="updateBrandProfile()"
        >
            {{ 'save' | translate }}
        </a>
        <a
            *ngIf="isEditBrandMode"
            class="view-order cursor-pointer mr-3"
            href="javascript:void(0);"
            (click)="deleteBrand()"
        >
            {{ 'delete' | translate }}
        </a>
        <a class="view-order cursor-pointer" href="javascript:void(0);" (click)="cancelAddBrand()">
            {{ 'cancel' | translate }}
        </a>
    </div>
</ng-template>

<ng-template #rightSidePanel>
    <div class="row m-0">
        <div
            class="col-12 col-md-6 col-lg-12 p-0 pl-md-0 pr-md-2 p-lg-0 mb-3 mb-md-0 mb-lg-3"
            *appAclIf="'brand-profile-management'"
        >
            <div class="border-main br-4 p-0">
                <div class="header fnt-18 fnt-bold text-clr334 m-1">{{ 'awards_and_certificates' | translate }}</div>
                <div class="row mt-3 m-0" *ngFor="let certificate of certificatesArray; let i = index">
                    <div class="col-12">
                        <div
                            class="w-100 d-flex justify-content-between"
                            [ngClass]="{ 'border-div': i !== certificatesArray.length - 1 || isSaveMode }"
                        >
                            <div class="d-flex mb-25">
                                <a [href]="certificate.public_url" target="_blank">
                                    <img
                                        class="img-estate"
                                        [src]="certificate.certificate_type_url"
                                        [alt]="certificate.certificate_type"
                                /></a>
                                <div class="ml-2">
                                    <ul class="no-bullet-ul">
                                        <li class="fnt-600">
                                            <a [href]="certificate.public_url" target="_blank">{{
                                                certificate.certificate_type_name
                                            }}</a>
                                        </li>
                                        <li class="fnt-600 text-clr588">
                                            {{ certificate.year }}
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="certificaion-action d-flex">
                                <a
                                    class="menu-arrow"
                                    [ngClass]="{ 'd-none': !isSaveMode }"
                                    [popover]="listTemplate"
                                    placement="left"
                                    [outsideClick]="true"
                                    #pop1="bs-popover"
                                >
                                    <img class="message-icon" src="assets/images/ellipses.png" alt="Message" />
                                </a>
                                <ng-template #listTemplate id="{{ certificate.id }}">
                                    <div id="popover-mobile-content">
                                        <ul class="list-data custom-popover">
                                            <li
                                                class="list-item fnt-14 fnt-600 fnt-muli text-clr588 border-none"
                                                (click)="editCertificate($event, certificate); pop1.hide()"
                                                *appAclIf="'brand-profile-management'"
                                            >
                                                <a class="pointer-item">
                                                    {{ 'edit' | translate }}
                                                </a>
                                            </li>
                                            <li
                                                class="list-item fnt-14 fnt-600 text-clr588 border-none"
                                                (click)="deleteCertificate(certificate.id); pop1.hide()"
                                                *appAclIf="'brand-profile-management'"
                                            >
                                                <a class="pointer-item">{{ 'delete' | translate }}</a>
                                            </li>
                                        </ul>
                                    </div>
                                </ng-template>
                            </div>
                        </div>
                    </div>
                </div>
                <div *ngIf="isSaveMode">
                    <div class="add-brand-div p-25 p-md-4" *appAclIf="'brand-profile-management'">
                        <a class="brand-tag add-link" routerLink="/roastery-profile/certificate">
                            <span class="add-text ml-4">{{ 'add_another_certificate' | translate }}</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-md-6 col-lg-12 p-0 pl-md-2 pr-md-0 p-lg-0">
            <div class="border-main br-4 p-0">
                <div class="header fnt-18 fnt-bold text-clr334 m-1">{{ 'employee_details' | translate }}</div>
                <div class="w-100">
                    <div class="d-flex employee-details-container pt-45 pb-45 pl-4 pr-4">
                        <div class="w-50 border-right">
                            <p class="m-0 fnt-32 fnt-bold text-clr334">
                                {{ roasteryProfileService.organizationProfile?.total_employees }}
                            </p>
                            <p class="mt-2 mb-0 fnt-18 fnt-600 text-clr588">{{ 'total_employees' | translate }}</p>
                        </div>
                        <div class="w-50 pl-45">
                            <p class="m-0 fnt-24 fnt-md-32 fnt-bold text-clr334">
                                {{ roasteryProfileService.organizationProfile?.avg_employee_age }}
                            </p>
                            <p class="mt-2 mb-0 fnt-14 fnt-md-18 fnt-600 text-clr588">
                                {{ 'average_age' | translate }}
                            </p>
                        </div>
                    </div>
                </div>

                <div class="w-100">
                    <div
                        *ngIf="
                            this.roasteryProfileService.organizationProfile?.male_employee_count == null &&
                            this.roasteryProfileService.organizationProfile?.female_employee_count == null
                        "
                    >
                        <p class="fnt-18 fnt-bold text-center">{{ 'no_data_display' | translate }}</p>
                    </div>
                    <div class="custom-chart-container">
                        <app-pie-area-chart [results]="roasteryProfileService.single"></app-pie-area-chart>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-template>

<!-- brand form template -->
<ng-template #brandFormTemplate>
    <form [formGroup]="brandForm">
        <div *ngIf="isSaveMode">
            <div class="mt-4 mt-md-45">
                <div class="row">
                    <div
                        class="sewn-form-field mb-45 brand-name"
                        [ngClass]="[
                            brandImageUrl === 'assets/images/default-brand.png' ? 'col-12 col-md-6 pr-md-2' : 'col-12'
                        ]"
                    >
                        <div class="d-md-none">
                            <ng-template *ngTemplateOutlet="brandButtonGroup"></ng-template>
                        </div>
                        <div class="d-flex">
                            <div
                                class="add-brand-data mr-3 mr-md-45"
                                *ngIf="brandImageUrl !== 'assets/images/default-brand.png'"
                            >
                                <label>
                                    {{ 'brand' | translate }} {{ 'logo' | translate }}<span class="star">*</span>
                                </label>
                                <div class="profile-avatar">
                                    <img [src]="brandImageUrl" class="avatar-img" />
                                    <a class="change-avatar-btn" *ngIf="isSaveMode" (click)="brandImageInput.click()">
                                        <img src="assets/images/camera.svg" class="camera-pic" />
                                    </a>
                                </div>
                                <div class="add-brand-btns">
                                    <button
                                        pButton
                                        icon="pi pi-trash"
                                        iconPos="left"
                                        class="fnt-14 btn-delete-avatar"
                                        (click)="deleteBrandImage()"
                                        label="{{ 'delete' | translate }}"
                                    ></button>
                                </div>
                            </div>

                            <div class="sewn-form-field mb-0 w-100">
                                <label> {{ 'brand_name' | translate }}<span class="star">*</span> </label>
                                <input
                                    type="text"
                                    required
                                    pInputText
                                    formControlName="name"
                                    placeholder="Please enter brand name"
                                    class="brand-name-input"
                                />
                                <small *ngIf="isBrandControlHasError('name', 'required')" class="p-error">
                                    {{ 'required' | translate }}
                                </small>
                            </div>
                            <div *ngIf="brandImageUrl !== 'assets/images/default-brand.png'" class="d-none d-md-block">
                                <ng-template *ngTemplateOutlet="brandButtonGroup"></ng-template>
                            </div>
                        </div>
                    </div>
                    <div
                        class="col-12 col-md-6 pl-md-2 sewn-form-field mb-45"
                        *ngIf="brandImageUrl === 'assets/images/default-brand.png'"
                    >
                        <label> {{ 'brand' | translate }} {{ 'logo' | translate }}<span class="star">*</span> </label>
                        <div class="brand-button-group d-flex justify-content-between">
                            <div
                                class="fnt-14 fnt-muli fnt-500 lh-normal txt-clr334 upload-button mt-md-2"
                                (click)="brandImageInput.click()"
                            >
                                <i class="pi pi-upload fnt-14 mr-1"></i>
                                Upload
                            </div>
                            <div class="d-none d-md-flex">
                                <ng-template *ngTemplateOutlet="brandButtonGroup"></ng-template>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="sewn-form-field col-md-12 mt-0">
                        <label
                            >{{ 'short_description_brand' | translate }}<span class="star">*</span>
                            <span class="pull-right text-clr588">
                                {{ brandForm.controls.description.value | wordCount }}/50 words
                            </span>
                        </label>
                        <textarea
                            class="w-100"
                            appWordLimit
                            [limit]="50"
                            pInputTextarea
                            rows="5"
                            formControlName="description"
                            placeholder="Tell us a bit about your brand"
                        >
                        </textarea>
                        <small *ngIf="isBrandControlHasError('description', 'required')" class="p-error">
                            {{ 'required' | translate }}
                        </small>
                        <small *ngIf="isBrandControlHasError('description', 'maxWordCount')" class="p-error">
                            Description shouldn't over 50 words
                        </small>
                    </div>
                </div>
            </div>
        </div>
    </form>
</ng-template>
<!-- end brand form template -->
<p-dialog
    header="Edit photo"
    [(visible)]="isShowBrandImageModal"
    [modal]="true"
    [baseZIndex]="10000"
    [draggable]="false"
    [resizable]="false"
    styleClass="p-0"
>
    <div class="image-crop-div">
        <div class="img-pos-div" style="max-height: 80vh">
            <image-cropper
                style="max-height: 60vh"
                [imageChangedEvent]="imageChangedEvent"
                [maintainAspectRatio]="true"
                [containWithinAspectRatio]="false"
                [aspectRatio]="1 / 1"
                [resizeToWidth]="256"
                [resizeToHeight]="256"
                [cropperMinWidth]="128"
                [onlyScaleDown]="false"
                [roundCropper]="true"
                [canvasRotation]="canvasRotation"
                [transform]="transform"
                [autoCrop]="false"
                [style.display]="showCropper ? null : 'none'"
                format="png"
                (imageCropped)="imageCropped($event)"
                (imageLoaded)="imageLoaded()"
                (loadImageFailed)="loadImageFailed()"
            ></image-cropper>
        </div>
        <div class="zoom-div w-100">
            <div class="slider-div mt-3">
                <p-slider [min]="1" [max]="5" [step]="0.1" [(ngModel)]="scale" (onChange)="zoom()"></p-slider>
            </div>
        </div>
    </div>
    <p-footer>
        <button type="button" id="change-pic" class="btn-raised" (click)="selectBrandImage()">
            {{ 'change_photo' | translate }}
        </button>
        <button type="button" id="save-pic" class="btn-raised" (click)="cropImage()">Crop Image</button>
    </p-footer>
</p-dialog>
