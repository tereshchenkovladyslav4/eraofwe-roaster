<div *ngIf="(sourcingSrv.viewMode$ | async) === 'grid'; else tableView" class="row">
    <div *ngFor="let item of coffeedata" class="col-12 col-md-6 col-lg-4 mb-3 mb-md-4">
        <div
            class="cursor-pointer h-100"
            routerLink="/sourcing/coffee-details/{{ item.estate.id }}/{{ item.harvest_id }}"
        >
            <app-harvest-card [data]="item"></app-harvest-card>
        </div>
    </div>
</div>

<ng-template #tableView>
    <div class="table-details br-main br-4 p-1">
        <div class="table-responsive border-coffeetable">
            <p-table [value]="coffeedata" [resizableColumns]="true" [autoLayout]="true">
                <ng-template pTemplate="header">
                    <tr>
                        <th>{{ globals.languageJson?.name }}</th>
                        <th>{{ globals.languageJson?.estate_name }}</th>
                        <th>{{ globals.languageJson?.origin }}</th>
                        <th>{{ globals.languageJson?.variety }}</th>
                        <th>{{ globals.languageJson?.price }}</th>
                        <th>{{ globals.languageJson?.quantity }}</th>
                        <th>{{ globals.languageJson?.flavour_profile }}</th>
                        <th>{{ globals.languageJson?.cup_score }}</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-item>
                    <tr
                        class="cursor-pointer"
                        routerLink="/sourcing/coffee-details/{{ item.estate.id }}/{{ item.harvest_id }}"
                    >
                        <td>{{ item.name }}</td>
                        <td>{{ item.estate?.name || '-' }}</td>
                        <td>{{ item.lot?.country || '-' }}</td>
                        <td>{{ item.lot?.varieties.join(', ') || '-' }}</td>
                        <td>{{ item.price_unit }}{{ item.price }} {{ Currencies[item.price_unit] }}&nbsp;/&nbsp;kg</td>
                        <td>
                            {{ item.quantity_count }}&nbsp;{{ item.quantity_type }} of {{ item.quantity
                            }}{{ item.quantity_unit }}
                        </td>
                        <td>{{ item.flavours }}</td>
                        <td>{{ item.cup_score }}</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</ng-template>
