<div class="row gutter-24">
    <div
        *ngFor="let question of questions"
        [ngClass]="{ 'col-12': viewMode === 'list', 'col-lg-6': viewMode === 'grid' }"
    >
        <div class="br-4 border-main mb-4 mb-md-3 mb-lg-4">
            <div class="p-md-4 p-3">
                <div class="d-flex justify-content-between">
                    <div>
                        <app-user-header [prop]="question"></app-user-header>
                    </div>
                    <div>
                        <p-menu #menu [popup]="true" [model]="questionMenuItems" appendTo="body"> </p-menu>
                        <i class="pi pi-ellipsis-h text-clr588 cursor-pointer" (click)="menu.toggle($event)"></i>
                    </div>
                </div>
                <div
                    class="fnt-muli fnt-18 font-weight-bold text-clr24 mt-4 cursor-pointer hover-underline"
                    [routerLink]="'/coffee-lab/questions/' + question.slug"
                    [innerHTML]="question?.question"
                ></div>
                <button
                    (click)="handleShowAllAnswers(question.id)"
                    [disabled]="loadingQuestionId === question.id"
                    class="btn-f8 w-100 d-md-none mt-4"
                    [routerLink]="'/coffee-lab/questions/' + question.slug"
                >
                    See all answers
                </button>
            </div>
            <div *ngIf="question.total_answers > 0" class="py-4 px-5 border-top-main d-none d-md-block">
                <div
                    *ngFor="let answer of question?.answers; let last = last"
                    [ngClass]="{ 'border-bottom-dashed': !last }"
                    class="mb-4"
                >
                    <div class="mb-4">
                        <app-user-header [prop]="answer"></app-user-header>
                    </div>
                    <div class="fnt-muli fnt-14 text-clr24 mb-4 lh-15">
                        <span>{{ answer?.answer | convertToShortDescription: 20 }}</span>
                        <a
                            [routerLink]="'/coffee-lab/questions/' + question.slug"
                            [queryParams]="{ answer: answer.id }"
                            class="custom-link ml-1"
                            >Read more</a
                        >
                    </div>
                </div>
                <button
                    *ngIf="question.answers?.length < question.total_answers"
                    (click)="handleShowAllAnswers(question.id)"
                    [disabled]="loadingQuestionId === question.id"
                    class="btn-f8 w-100"
                >
                    See all answers
                </button>
            </div>
        </div>
    </div>
</div>
