<div class="row">
    <div class="col-12 col-md-7 pr-md-0">
        <app-publish-forum class="w-100" type="question"></app-publish-forum>
    </div>
</div>

<div class="mt-2">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div class="custom-search qa-forum-search d-block d-lg-none">
            <input
                class="w-100 fnt-16"
                [(ngModel)]="keyword"
                (ngModelChange)="handleSearch()"
                type="text"
                pInputText
                [placeholder]="'search_qna_forum' | translate"
            />
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-7 px-0">
            <div class="d-flex mb-md-4 ml-3">
                <div class="d-md-flex justify-content-md-between align-items-center pr-lg-2 flex-1">
                    <div class="d-flex">
                        <div>
                            <p-dropdown
                                [options]="filterPostedByOptions"
                                optionLabel="label"
                                optionValue="value"
                                [(ngModel)]="coffeeLabService.qaForumViewFilterBy"
                                (ngModelChange)="getQuestions()"
                                styleClass="round-border text-clr588"
                                [placeholder]="'posted_by' | translate"
                                [showClear]="true"
                            ></p-dropdown>
                        </div>
                        <p-dropdown
                            [options]="categoryList"
                            (onChange)="getQuestions()"
                            [(ngModel)]="coffeeLabService.qaForumViewCategory"
                            styleClass="round-border text-clr588"
                            [placeholder]="'category' | translate"
                            optionLabel="name"
                            optionValue="slug"
                            class="ml-3"
                            [showClear]="true"
                        ></p-dropdown>
                        <div class="ml-md-3 d-none d-md-block">
                            <p-dropdown
                                [options]="sortOptions"
                                [(ngModel)]="coffeeLabService.qaForumViewSortBy"
                                (ngModelChange)="getQuestions()"
                                [placeholder]="'sort_by' | translate"
                                styleClass="round-border text-clr588"
                                optionLabel="label"
                                optionValue="value"
                                [showClear]="true"
                            ></p-dropdown>
                        </div>
                    </div>
                    <div class="my-3 my-md-0 ml-0 d-md-none">
                        <p-dropdown
                            [options]="sortOptions"
                            [(ngModel)]="coffeeLabService.qaForumViewSortBy"
                            (ngModelChange)="getQuestions()"
                            styleClass="round-border text-clr588"
                            [placeholder]="'sort_by' | translate"
                            optionLabel="label"
                            optionValue="value"
                            [showClear]="true"
                        ></p-dropdown>
                    </div>
                </div>
                <div class="d-none d-lg-block empty-join-wrapper pl-lg-2"></div>
            </div>
            <div class="d-block ml-25 mr-25 ml-md-3 mr-md-0">
                <div *ngIf="!isLoading">
                    <app-questions [questions]="questions" [viewMode]="viewMode"></app-questions>
                </div>
                <div *ngIf="!isLoading && !questions.length" class="text-center my-4 fnt-muli text-clr24">
                    <app-empty
                        [title]="(keyword ? 'no_data_available' : 'you_have_not_posted_anything_yet') | translate"
                        [description]="(keyword ? '' : 'no_any_posts_to_show_description') | translate"
                    ></app-empty>
                </div>
            </div>
        </div>
        <div *ngIf="!isLoading" class="col-12 col-md-4 px-0 mx-auto w-min-content d-none d-lg-block h-fit-content">
            <div class="empty-join-wrapper d-none d-lg-block mb-4">
                <div class="custom-search qa-forum-search d-none d-lg-block">
                    <input
                        class="w-100 fnt-16"
                        [(ngModel)]="keyword"
                        (ngModelChange)="handleSearch()"
                        type="text"
                        pInputText
                        [placeholder]="'search_qna_forum' | translate"
                    />
                </div>
            </div>
            <app-join-community [type]="'question'"></app-join-community>
        </div>
        <div class="col-lg-8" [ngClass]="{ 'col-lg-8': viewMode === 'list', 'col-12': viewMode === 'grid' }"></div>
    </div>
</div>

<div *ngIf="isLoading">
    <app-loading></app-loading>
</div>
