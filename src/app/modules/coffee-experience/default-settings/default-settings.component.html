<div class="total-loader" *ngIf="coffeeDetailsActive != 1">
    <div>
        <img class="loader-gif web-loader" src="/assets/images/loader.gif" />
        <img class="loader-gif mob-loader" src="/assets/images/coffeeloader-mobile.gif" />
    </div>
</div>
<div *ngIf="coffeeDetailsActive == 1">
    <section>
        <div class="container section-head-pad">
            <section class="section-farmlink">
                <div class="main-block">
                    <div class="row">
                        <div class="col-12 d-flex no-block align-items-center">
                            <div class="breadcrumb-container d-none d-md-block">
                                <p-breadcrumb [model]="items"></p-breadcrumb>
                            </div>
                            <div class="mb-4 d-block d-md-none">
                                <a class="back-page fnt-500" (click)="location.back()"> {{ 'back' | translate }}</a>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="align-items-start">
                                <div class="d-inline-block col-sm-12 col-md-8 col-lg-9 px-0">
                                    <div class="page-title">
                                        {{ isCoffeeDetailsPage ? 'Order #' + orderId : 'Default Settings' }}
                                    </div>
                                    <div class="page-description">
                                        Set your default settings for your coffee expereice page. these would be used
                                        when you havenâ€™t updated details for the order related coffee experience page
                                    </div>
                                </div>
                                <div class="col-12 col-md-4 col-lg-3 butn-prev-save butn-prev-save--desktop">
                                    <button
                                        *ngIf="isEditableMode"
                                        type="button"
                                        class="btn-stroked cancel-btn px-4"
                                        (click)="onCancel()"
                                    >
                                        {{ 'cancel' | translate }}
                                    </button>
                                    <button
                                        *ngIf="isEditableMode"
                                        type="button"
                                        class="btn-raised px-4"
                                        [disabled]="isSaving"
                                        (click)="onSave()"
                                    >
                                        {{ 'save' | translate }}
                                    </button>
                                    <button
                                        *ngIf="!isEditableMode && estateBtn"
                                        type="button"
                                        class="btn-raised px-4"
                                        [disabled]="isSaving"
                                        (click)="isEditableMode = true"
                                    >
                                        {{ 'edit' | translate }}
                                    </button>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-12 col-lg-8 order-1 order-md-2 order-lg-1">
                                    <div
                                        class="border-0-input border-top-dashed-d6 border-btm-dashed-d6 form-container"
                                    >
                                        <div class="input-container">
                                            <div class="col-12 col-md-5 px-0">
                                                <div class="sewn-form-field mb-0">
                                                    <div>
                                                        <label>Roastery website</label>
                                                    </div>
                                                    <input
                                                        *ngIf="isEditableMode"
                                                        pInputText
                                                        [(ngModel)]="defaultDetails.website"
                                                        class="roastery-website-input border"
                                                        type="text"
                                                        pInputText
                                                    />
                                                    <div class="no-editable-text" *ngIf="!isEditableMode">
                                                        {{ defaultDetails.website }}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="input-container">
                                            <div class="col-12 px-0">
                                                <div>
                                                    <label>A short description about the Roastery</label>
                                                </div>
                                                <div class="sewn-form-field w-100 mb-0" *ngIf="isEditableMode">
                                                    <textarea
                                                        class="w-100 border"
                                                        [ngClass]="{
                                                            'ng-invalid': isSent && !defaultDetails.description
                                                        }"
                                                        rows="5"
                                                        cols="50"
                                                        pInputTextarea
                                                        [(ngModel)]="defaultDetails.description"
                                                    ></textarea>
                                                    <small
                                                        *ngIf="isSent && !defaultDetails.description"
                                                        class="p-error"
                                                    >
                                                        Required
                                                    </small>
                                                </div>
                                                <div class="no-editable-text" *ngIf="!isEditableMode">
                                                    {{ defaultDetails.description }}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="roastery-fields">
                                            <div class="roastery-tags">
                                                <div class="col-12 px-0">
                                                    <label>{{ 'select_tags' | translate }}(max 5)</label>
                                                    <div
                                                        class="roastery-tags__checkboxes"
                                                        [ngClass]="{ 'p-0 border-0': !isEditableMode }"
                                                    >
                                                        <label
                                                            *ngFor="let item of tagOptionList; let index = index"
                                                            class="custom-label"
                                                            [ngClass]="item.select ? 'active' : ''"
                                                        >
                                                            <input
                                                                class="custom-label__inputs"
                                                                type="checkbox"
                                                                (change)="onChangeTag(index)"
                                                            />
                                                            <span
                                                                class="custom-raotary-tags"
                                                                [ngClass]="{ 'mt-2': !isEditableMode }"
                                                                >{{ item.label }}</span
                                                            >
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-lg-4 order-2 order-md-1 order-lg-2">
                                    <div
                                        class="form-section__inputs certificates-container form-section__inputs--withHead"
                                    >
                                        <div
                                            class="input-head input-head--uplaod d-flex align-items-center justify-content-between"
                                        >
                                            <h5 class="fnt-14 fnt-muli fnt-700 text-clr334 mb-0">
                                                {{ 'certificates' | translate }}
                                            </h5>
                                            <label class="mb-0" routerLink="/roastery-profile/certificate">
                                                <span class="fnt-muli fnt-700 d-inline-block">+</span>
                                            </label>
                                        </div>
                                        <div class="input-body">
                                            <div class="upload-file-results">
                                                <div
                                                    *ngFor="let item of certificateDetails"
                                                    class="upload-file-results__item d-flex justify-content-between align-items-center"
                                                >
                                                    <div class="pr-3">
                                                        <h4 class="mb-0 fnt-14 fnt-700 fnt-muli text-clr334 mb-1">
                                                            {{ item.name }}
                                                        </h4>
                                                        <span class="d-block fnt-12 fnt-600 fnt-muli text-clr588">{{
                                                            item.year
                                                        }}</span>
                                                    </div>
                                                    <div class="d-none d-md-flex">
                                                        <button
                                                            class="fnt-muli fnt-14 fnt-700"
                                                            (click)="viewCertificate(item)"
                                                        >
                                                            {{ 'view' | translate }}
                                                        </button>
                                                        <button
                                                            *ngIf="estateBtn"
                                                            class="fnt-muli fnt-14 fnt-700"
                                                            (click)="deleteCertificate(item.id)"
                                                        >
                                                            {{ 'delete' | translate }}
                                                        </button>
                                                    </div>
                                                    <div class="d-block d-md-none">
                                                        <i
                                                            class="pi pi-ellipsis-v cursor-pointer line-height-2"
                                                            (click)="menu.toggle($event)"
                                                        ></i>
                                                        <p-menu
                                                            #menu
                                                            [popup]="true"
                                                            [model]="certificateMenuItems"
                                                            appendTo="body"
                                                        ></p-menu>
                                                    </div>
                                                </div>
                                                <div *ngIf="!certificateDetails.length" class="text-center">
                                                    No certificates to display
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-flex flex-column flex-md-row flex-lg-column">
                                        <div class="media-container">
                                            <div *ngIf="isImagePreviewPanel" class="existing-media-container">
                                                <div
                                                    class="content-container"
                                                    [style.backgroundImage]="'url(' + defaultDetails.image_url + ')'"
                                                >
                                                    <!--                                                    <img [src]="defaultDetails.image_url" alt="image" class="w-100 h-100">-->
                                                    <div class="grey-gradient-container text-white">
                                                        <div>Image</div>
                                                        <div *ngIf="isEditableMode">
                                                            <i
                                                                class="pi pi-ellipsis-v cursor-pointer line-height-2"
                                                                (click)="menu.toggle($event)"
                                                            ></i>
                                                            <p-menu
                                                                #menu
                                                                [popup]="true"
                                                                [model]="imageMenuItems"
                                                                appendTo="body"
                                                            ></p-menu>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="!isImagePreviewPanel" class="roastery-upload-files">
                                                <div class="roastery-fields">
                                                    <div>
                                                        <div
                                                            class="roastery-uploads__image d-flex align-items-center justify-content-center"
                                                        >
                                                            <label class="mb-0">
                                                                <input
                                                                    type="file"
                                                                    (change)="onChooseFile($event.target, 'fileImage')"
                                                                />
                                                                <div
                                                                    class="d-flex flex-wrap align-items-center justify-content-center"
                                                                >
                                                                    <img src="assets/images/upload-black.svg" />
                                                                    <span
                                                                        class="mb-0 ml-2 d-inline-block fnt-14 fnt-muli fnt-500 text-clr334"
                                                                    >
                                                                        {{ 'upload_an_image' | translate }}
                                                                    </span>
                                                                    <p
                                                                        class="mb-0 d-block w-100 text-center mt-2 fnt-12 fnt-muli fnt-normal text-clr588"
                                                                    >
                                                                        {{ 'choose_image_text' | translate }}
                                                                    </p>
                                                                    <div *ngIf="fileImage" class="text-center">
                                                                        <small>File attached</small>
                                                                    </div>
                                                                </div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="media-container">
                                            <div *ngIf="isVideoPreviewPanel" class="existing-media-container">
                                                <div class="content-container">
                                                    <img
                                                        (click)="video.paused ? video.play() : video.pause()"
                                                        src="assets/images/play-button.png"
                                                        alt="play"
                                                        class="play-button"
                                                    />
                                                    <video
                                                        #video
                                                        [src]="defaultDetails.video_url"
                                                        class="w-100"
                                                    ></video>
                                                    <div class="grey-gradient-container text-white">
                                                        <div>Video</div>
                                                        <div *ngIf="isEditableMode">
                                                            <i
                                                                class="pi pi-ellipsis-v cursor-pointer line-height-2"
                                                                (click)="menu.toggle($event)"
                                                            ></i>
                                                            <p-menu
                                                                #menu
                                                                [popup]="true"
                                                                [model]="videoMenuItems"
                                                                appendTo="body"
                                                            ></p-menu>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="!isVideoPreviewPanel" class="roastery-upload-files">
                                                <div class="roastery-fields">
                                                    <div>
                                                        <div
                                                            class="roastery-uploads__image d-flex align-items-center justify-content-center"
                                                        >
                                                            <label class="mb-0">
                                                                <input
                                                                    type="file"
                                                                    (change)="onChooseFile($event.target, 'fileVideo')"
                                                                />
                                                                <div
                                                                    class="d-flex flex-wrap align-items-center justify-content-center"
                                                                >
                                                                    <img src="assets/images/upload-black.svg" />
                                                                    <span
                                                                        class="mb-0 ml-2 d-inline-block fnt-14 fnt-muli fnt-500 text-clr334"
                                                                        >{{ 'upload_an_video' | translate }}</span
                                                                    >
                                                                    <p
                                                                        class="mb-0 d-block w-100 text-center mt-2 fnt-12 fnt-muli fnt-normal text-clr588"
                                                                    >
                                                                        {{ 'choose_image_text' | translate }}
                                                                    </p>
                                                                    <div *ngIf="fileVideo" class="text-center">
                                                                        <small>File attached</small>
                                                                    </div>
                                                                </div>
                                                            </label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!--Share your story-->
                                    <div *ngIf="isCoffeeDetailsPage" class="form-section__inputs">
                                        <div class="roastery-fields">
                                            <h4 class="fnt-16 fnt-700 fnt-muli text-clr334">
                                                {{ 'share_your_story' | translate }}
                                            </h4>
                                            <div class="copy-link">
                                                <label class="fnt-14 fnt-600 fnt-muli text-clr588">
                                                    {{ 'share_story_text' | translate }}
                                                </label>
                                                <div
                                                    class="copy-link__value d-flex d-md-column d-lg-row flex-wrap align-items-center"
                                                >
                                                    <input type="text" [value]="coffeeExperienceLink" readonly />
                                                    <button (click)="handleCopyCoffeeExperienceLink()">
                                                        {{ 'copy_link' | translate }}
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="scan-qr-link text-center">
                                                <span
                                                    class="d-inline-block mx-auto fnt-12 fnt-600 fnt-muli text-clr334 mb-3 mt-3 mt-md-0 mb-lg-4 text-capitalize"
                                                    >or</span
                                                >
                                                <p
                                                    class="text-md-left fnt-14 fnt-600 fnt-muli text-clr334 mb-3 mb-lg-4"
                                                >
                                                    {{ 'scan_download_text' | translate }}
                                                </p>
                                                <div class="text-center">
                                                    <img class="img-fluid" src="assets/images/qr.PNG" />
                                                    <div class="download-qr-link">
                                                        <a
                                                            class="download-qr-link__file d-inline-flex align-items-center"
                                                            href="assets/images/dwnd.png"
                                                            download
                                                        >
                                                            <img src="assets/images/dwnd.png" />
                                                            <span
                                                                class="text-capitalize mb-0 ml-2 fnt-14 fnt-500 fnt-muli text-clr334"
                                                            >
                                                                {{ 'download' | translate }}
                                                            </span>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="text-center contact-for-help">
                                            <p class="mb-0 contact-for-help__text">
                                                {{ 'having_trouble' | translate }}?
                                                <a class="ml-1" href="#">{{ 'contact_us' | translate }}</a>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="mt-2 d-block d-md-none">
                                        <div *ngIf="isEditableMode">
                                            <div class="mb-3">
                                                <button
                                                    pButton
                                                    type="button"
                                                    [disabled]="isSaving"
                                                    (click)="onSave()"
                                                    [label]="'save' | translate"
                                                    class="btn-raised w-100"
                                                ></button>
                                            </div>
                                            <div>
                                                <button (click)="onCancel()" type="button" class="btn-stroked w-100">
                                                    {{ 'cancel' | translate }}
                                                </button>
                                            </div>
                                        </div>
                                        <div *ngIf="estateBtn && !isEditableMode">
                                            <button
                                                type="button"
                                                (click)="isEditableMode = true"
                                                class="btn-raised w-100"
                                            >
                                                {{ 'edit' | translate }}
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </section>
</div>
