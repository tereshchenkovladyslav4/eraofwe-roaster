<section class="total-section">
    <div class="back-page pb-45" (click)="cancel()">{{ 'back' | translate }}</div>

    <div class="d-flex justify-content-between align-items-center align-items-md-start">
        <div class="fnt-head fnt-24">{{ 'green_coffee_grading' | translate }}</div>
        <button class="btn-stroked skip_btn" (click)="skip()">{{ 'skip' | translate }}</button>
    </div>

    <div class="mt-1">
        <app-estate-info
            [cuppingDetails]="cuppingDetails"
            [evaluatorName]="evaluatorName"
            (showDetail)="showDetail.emit()"
        >
        </app-estate-info>
    </div>
    <div class="row gutter-16 mt-3 mt-md-4">
        <div class="col-lg-6 col-12">
            <app-category-view
                [categoryData]="dataObj"
                [categoryList]="category1List"
                [categoryDefects]="category1Defects"
                categoryIndex="1"
                (handleChange)="handleChange($event)"
                (handleDefectsChange)="handleDefectsChange($event)"
                [readonly]="!isEditable"
            >
            </app-category-view>

            <div class="d-none d-lg-block">
                <ng-container *ngTemplateOutlet="otherDefectsTpl"></ng-container>
            </div>
        </div>

        <div class="col-lg-6 col-12">
            <app-category-view
                [categoryData]="dataObj"
                [categoryList]="category2List"
                [categoryDefects]="cat2Defects"
                categoryIndex="2"
                (handleChange)="handleChange($event)"
                (handleDefectsChange)="handleDefectsChange($event)"
                [readonly]="!isEditable"
            >
            </app-category-view>

            <div class="sewn-form-field horizontal-md d-flex row gutter-8 mt-4 mt-md-45 mb-4 mb-md-45">
                <label class="fnt-16 fw-b col-md-4 col-lg-5 pr-1">{{ 'total_green_defects' | translate }} :</label>
                <div class="col-md-8 col-lg-7">
                    <input type="number" pInputText [(ngModel)]="totalDefects" [readonly]="!isEditable" />
                </div>
            </div>
        </div>

        <div class="col-12 d-lg-none mb-3">
            <ng-container *ngTemplateOutlet="otherDefectsTpl"></ng-container>
        </div>
    </div>

    <div class="d-flex justify-content-between flex-column flex-md-row pt-0 pt-md-4">
        <button class="btn-stroked order-1 order-md-0 w-mob-100 mb-2 mb-md-0" (click)="cancel()">
            {{ 'cancel' | translate }}
        </button>
        <div class="d-flex flex-column flex-md-row">
            <button
                [disabled]="!isEditable"
                class="btn-stroked mr-2 order-1 order-md-0 w-mob-100 mb-2 mb-md-0"
                (click)="clear()"
            >
                {{ 'clear' | translate }}
            </button>
            <button class="btn-raised w-mob-100 mb-2 mb-md-0" (click)="goNext()">{{ 'next' | translate }}</button>
        </div>
    </div>
</section>

<ng-template #otherDefectsTpl>
    <div class="border-main br-4 pt-3 px-2 px-md-4">
        <div class="sewn-form-field horizontal d-flex row gutter-8 mb-2">
            <label class="col-4 pr-1">{{ 'moisture_content' | translate }}</label>
            <div class="col-8 p-inputgroup custom-addon">
                <input
                    type="number"
                    pInputText
                    placeholder="Type a number"
                    [(ngModel)]="moistureContent"
                    [readonly]="!isEditable"
                />
                <span class="p-inputgroup-addon">%</span>
            </div>
        </div>
        <div class="sewn-form-field horizontal d-flex row gutter-8 mb-2">
            <label class="col-4 pr-1">{{ 'water_activity' | translate }}</label>
            <div class="col-8 p-inputgroup custom-addon">
                <input type="number" pInputText [(ngModel)]="waterActivity" [readonly]="!isEditable" />
                <span class="p-inputgroup-addon">aw</span>
            </div>
        </div>
        <div class="sewn-form-field horizontal d-flex row gutter-8 mb-2">
            <label class="col-4 pr-1">{{ 'odor' | translate }}</label>
            <div class="col-8">
                <input type="text" pInputText [(ngModel)]="odor" [readonly]="!isEditable" />
            </div>
        </div>
        <div class="sewn-form-field horizontal-md d-flex row gutter-8 pt-md-2">
            <label class="col-md-4 pr-2">{{ 'color' | translate }}</label>
            <div class="col-md-8 d-flex flex-wrap">
                <span class="pb-3 pr-2 pr-lg-3" *ngFor="let color of colorList">
                    <p-checkbox
                        name="colors"
                        [value]="color.value"
                        [(ngModel)]="totalColors"
                        [label]="color.label"
                        [readonly]="!isEditable"
                    >
                    </p-checkbox>
                </span>
            </div>
        </div>
    </div>
</ng-template>
