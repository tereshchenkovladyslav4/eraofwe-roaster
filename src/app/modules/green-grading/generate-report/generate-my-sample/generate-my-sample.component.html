<section class="total-section prime-grid">
    <div class="back-page pb-45" (click)="goBack()">
        <a>
            <span>Back</span>
        </a>
    </div>
    <span class="request-title-text">Green coffee grading</span>
    <!-- Sample -->
    <div class="pt-3 pt-md-4">
        <app-estate-info
            [cuppingDetails]="cuppingDetails"
            [singleCuppingDetails]="singleCuppingDetails"
            [evaluatorsListArray]="evaluatorsListArray"
            [evaluatorName]="evaluatorName"
            (showDetail)="showDetail.emit()"
        ></app-estate-info>
    </div>

    <!-- Final Score -->
    <div class="final-score mt-4">
        <div class="col-12 final-label">
            <div class="d-flex justify-content-between align-items-start flex-column flex-md-row align-items-md-center">
                <span class="fnt-16 fnt-700 fnt-muli mr-2 black"> Final Score </span>
                <span>
                    <input
                        class="lots-input col-6"
                        type="number"
                        placeholder="00"
                        [(ngModel)]="finalScore"
                        [readonly]="true"
                        [ngModelOptions]="{ standalone: true }"
                    />
                </span>
            </div>

            <div class="btn-group btn-toggle active__main" (click)="changeMode()">
                <div class="btn group-btn" [ngClass]="isAdvance ? 'active_default' : 'disable_default'">Advance</div>
                <div class="btn group-btn" [ngClass]="isAdvance ? 'disable_default' : 'active_default'">Quick</div>
            </div>
        </div>

        <div class="select-roaster-level">
            <div class="roast-border">
                <label class="fnt-12 fnt-700 fnt-muli black mb-0">Select roast level</label>
                <div class="roast-custom-check">
                    <span class="roast-container" *ngFor="let i of [1, 2, 3, 4, 5, 6, 7, 8]">
                        <p-checkbox
                            name="roastLevel"
                            [value]="i"
                            [(ngModel)]="roastLevel"
                            (onChange)="onCheckRoastLevel(i)"
                            inputId="sf"
                            class="roast-checkbox"
                            styleClass="p-checkbox-roast"
                        >
                        </p-checkbox>
                    </span>
                </div>

                <div class="table-final-score d-flex mt-3 pb-0">
                    <div class="w-md-10 fragrance-wrapper">
                        <label class="field-title-label fnt-700 fnt-muli black"> Fragrance/Aroma</label>
                        <input
                            class="roast-input col-12"
                            type="number"
                            placeholder="Enter score"
                            [(ngModel)]="fragrance"
                            [ngModelOptions]="{ standalone: true }"
                            (change)="calculateFinalScore()"
                        />
                        <div *ngIf="isAdvance" class="fragrance">
                            <div class="fragrance-border">
                                <p class="fnt-10 fnt-700 fnt-muli black mb-1">Dry</p>
                                <p-slider
                                    [(ngModel)]="fragranceDry"
                                    [step]="1"
                                    [min]="-3"
                                    [max]="3"
                                    styleClass="p-frag-slider"
                                ></p-slider>
                                <div class="dry-break-wrapper">
                                    <p
                                        class="fnt-9 fnt-700 fnt-muli black mt-1 mb-0"
                                        *ngFor="let fragranceValue of [-3, -2, -1, 0, 1, 2, 3]"
                                    >
                                        {{ fragranceValue }}
                                    </p>
                                </div>
                            </div>
                            <div class="fragrance-border">
                                <p class="fnt-10 fnt-700 fnt-muli black mb-1">Break</p>
                                <p-slider
                                    [(ngModel)]="fragranceBreak"
                                    [step]="1"
                                    [min]="-3"
                                    [max]="3"
                                    styleClass="p-frag-slider"
                                ></p-slider>
                                <div class="dry-break-wrapper">
                                    <p
                                        class="fnt-10 fnt-700 fnt-muli black mt-1 mb-0"
                                        *ngFor="let fragBreak of [-3, -2, -1, 0, 1, 2, 3]"
                                    >
                                        {{ fragBreak }}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mdev-tab">
                        <div>
                            <label class="field-title-label fnt-700 fnt-muli black"> Flavor</label>
                            <input
                                class="roast-input col-12"
                                type="number"
                                placeholder="Enter score"
                                [(ngModel)]="flavorScore"
                                [ngModelOptions]="{ standalone: true }"
                                (change)="calculateFinalScore()"
                            />
                        </div>
                        <div>
                            <label class="field-title-label fnt-700 fnt-muli black"> Aftertaste</label>
                            <input
                                class="roast-input col-12"
                                type="number"
                                placeholder="Enter score"
                                [(ngModel)]="aftertasteScore"
                                [ngModelOptions]="{ standalone: true }"
                                (change)="calculateFinalScore()"
                            />
                        </div>
                    </div>
                    <div class="w-md-10">
                        <label class="field-title-label fnt-700 fnt-muli black"> Acidity</label>
                        <input
                            class="roast-input col-12"
                            type="number"
                            placeholder="Enter score"
                            [(ngModel)]="acidityScore"
                            [ngModelOptions]="{ standalone: true }"
                            (change)="calculateFinalScore()"
                        />
                        <div *ngIf="isAdvance" class="level-wrapper">
                            <p class="fnt-10 fnt-700 fnt-muli mb-0 black">Intensity</p>
                            <div class="custom-check mb-1 mt-1">
                                <label class="level-container" *ngFor="let i of [1, 2, 3, 4, 5]">
                                    <input
                                        type="radio"
                                        name="intensity"
                                        [checked]="acidityIntensity === i"
                                        (click)="selectColor($event, 'acidity', i)"
                                    />
                                    <span class="checkmark"></span>
                                </label>
                            </div>
                            <div class="low-high-content">
                                <p class="fnt-10 fnt-700 fnt-muli black">Low</p>
                                <p class="fnt-10 fnt-700 fnt-muli black">High</p>
                            </div>
                        </div>
                    </div>
                    <div class="w-md-10">
                        <label class="field-title-label fnt-700 fnt-muli black"> Body</label>
                        <input
                            class="roast-input col-12"
                            type="number"
                            placeholder="Enter score"
                            [(ngModel)]="bodyScore"
                            [ngModelOptions]="{ standalone: true }"
                            (change)="calculateFinalScore()"
                        />
                        <div *ngIf="isAdvance" class="level-wrapper">
                            <p class="fnt-10 fnt-700 fnt-muli mb-0 black">Level</p>
                            <div class="custom-check mb-1 mt-1">
                                <label class="level-container" *ngFor="let i of [1, 2, 3, 4, 5]">
                                    <input
                                        type="radio"
                                        name="level"
                                        [checked]="bodyLevel === i"
                                        (click)="selectColor($event, 'body', i)"
                                    />
                                    <span class="checkmark"></span>
                                </label>
                            </div>
                            <div class="low-high-content">
                                <p class="fnt-10 fnt-700 fnt-muli black">Low</p>
                                <p class="fnt-10 fnt-700 fnt-muli black heavy-high">High</p>
                            </div>
                        </div>
                    </div>
                    <div class="w-md-8">
                        <label class="field-title-label fnt-700 fnt-muli black"> Balance</label>
                        <input
                            class="roast-input col-12"
                            type="number"
                            placeholder="Enter score"
                            [(ngModel)]="balanceScore"
                            [ngModelOptions]="{ standalone: true }"
                            (change)="calculateFinalScore()"
                        />
                    </div>
                    <div class="w-md-10">
                        <label class="field-title-label fnt-700 fnt-muli black"> Uniformity</label>
                        <input
                            class="roast-input col-12"
                            type="number"
                            placeholder="Enter score"
                            [(ngModel)]="uniformityScore"
                            [ngModelOptions]="{ standalone: true }"
                            [readonly]="isAdvance"
                            (change)="calculateFinalScore()"
                        />
                        <div *ngIf="isAdvance" class="level-wrapper">
                            <div class="custom-check">
                                <label class="level-container" *ngFor="let i of [1, 2, 3, 4, 5]">
                                    <input
                                        type="checkbox"
                                        name="Uniformity"
                                        [checked]="uniformityValue.includes(i)"
                                        (click)="selectLevels($event, 'uniformity', i)"
                                    />
                                    <span class="checkmark">{{ i }}</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="w-md-10">
                        <label class="field-title-label fnt-700 fnt-muli black"> Clean Cup</label>
                        <input
                            class="roast-input col-12"
                            type="number"
                            placeholder="Enter score"
                            [(ngModel)]="cleancupScore"
                            [ngModelOptions]="{ standalone: true }"
                            [readonly]="isAdvance"
                            (change)="calculateFinalScore()"
                        />
                        <div *ngIf="isAdvance" class="level-wrapper">
                            <div class="custom-check">
                                <label class="level-container" *ngFor="let i of [1, 2, 3, 4, 5]">
                                    <input
                                        type="checkbox"
                                        name="clean-cup"
                                        [checked]="cleancupValue.includes(i)"
                                        (click)="selectLevels($event, 'cleanCup', i)"
                                    />
                                    <span class="checkmark">{{ i }}</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="w-md-10">
                        <label class="fnt-12 fnt-700 fnt-muli black"> Sweetness </label>
                        <input
                            class="roast-input col-12"
                            type="number"
                            placeholder="Enter score"
                            [(ngModel)]="sweetnessScore"
                            [ngModelOptions]="{ standalone: true }"
                            [readonly]="isAdvance"
                            (change)="calculateFinalScore()"
                        />
                        <div *ngIf="isAdvance" class="level-wrapper">
                            <div class="custom-check">
                                <label class="level-container" *ngFor="let i of [1, 2, 3, 4, 5]">
                                    <input
                                        type="checkbox"
                                        name="sweetness"
                                        [checked]="sweetnessValue.includes(i)"
                                        (click)="selectLevels($event, 'sweetness', i)"
                                    />
                                    <span class="checkmark">{{ i }}</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="w-md-8">
                        <label class="field-title-label fnt-700 fnt-muli black"> Overall</label>
                        <input
                            class="roast-input col-12"
                            type="number"
                            placeholder="Enter score"
                            [(ngModel)]="overallScore"
                            [ngModelOptions]="{ standalone: true }"
                            (change)="calculateFinalScore()"
                        />
                    </div>
                    <div class="w-md-10">
                        <label class="fnt-12 fnt-700 fnt-muli black"> Defects </label>
                        <div class="level-wrapper defect-wrapper flex-1">
                            <p class="fnt-10 fnt-700 fnt-muli black m-0">Number of cups</p>
                            <div class="custom-check mb-2 mt-1">
                                <label class="level-container" *ngFor="let i of [1, 2, 3, 4, 5]">
                                    <input
                                        type="radio"
                                        name="Defects"
                                        [checked]="defectsNoOfCups === i"
                                        (click)="selectColor($event, 'defects', i)"
                                    />
                                    <span class="checkmark">{{ i }}</span>
                                </label>
                            </div>
                            <p class="fnt-10 fnt-700 fnt-muli black m-0">Intensity</p>
                            <div
                                class="btn-group toggle_butn ml-auto pull-right defect__main mt-2"
                                (click)="changeDefectIntensity()"
                            >
                                <div
                                    class="btn group-btn"
                                    [ngClass]="btnToggle ? 'taint_default' : 'active fault_default'"
                                >
                                    Taint
                                </div>
                                <div
                                    class="btn group-btn"
                                    [ngClass]="!btnToggle ? 'taint_default active' : 'fault_default'"
                                >
                                    Fault
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Add Descriptors  -->
            <div class="add-description">
                <div class="row">
                    <div class="col-lg-6 col-12 d-flex flex-column">
                        <p-dropdown
                            #myDropdown
                            [options]="flavourArray"
                            (onChange)="addLang($event)"
                            styleClass="p-descriptors-dropdown"
                            placeholder="Add Descriptors"
                            optionLabel="name"
                            [filter]="true"
                            filterBy="name"
                            dropdownIcon="pi pi-plus"
                        >
                            <ng-template pTemplate="selectedItem">Add Descriptors</ng-template>
                        </p-dropdown>
                        <p-chips
                            [(ngModel)]="langChips"
                            field="name"
                            addOnBlur
                            [allowDuplicate]="false"
                            styleClass="p-descriptors-chips"
                        ></p-chips>
                    </div>
                    <div class="col-lg-6 col-12 mt-lg-0 mt-3">
                        <label class="fnt-muli fnt-14 fnt-600 text-clr334">Add a comment</label>
                        <input
                            type="text"
                            placeholder="Please enter your comment here"
                            class="comment-input"
                            [(ngModel)]="comments"
                            [ngModelOptions]="{ standalone: true }"
                        />
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- buttons save and cancel -->
    <div
        class="d-flex justify-content-lg-end justify-content-md-between flex-column-reverse flex-md-row w-100 pt-3 pt-md-4"
    >
        <button class="green-button btn-stroked mr-0 mr-md-4" (click)="cancel()">Cancel</button>
        <button class="green-button btn-raised mb-2 mb-md-0" (click)="goNext()">Submit</button>
    </div>
</section>
