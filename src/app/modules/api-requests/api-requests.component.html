<div class="bg-fff request-table-container">
    <div class="bread-crumb">
        <p-breadcrumb [model]="breadCrumbItem"></p-breadcrumb>
    </div>
    <section class="api-request-heading">
        <div class="row justify-content-between align-items-center">
            <div class="col-lg-8 col-md-4 p-0">
                <h5 class="estate-order-title m-0">{{ globals.languageJson?.api_request }}</h5>
                <p class="Give-your-end-users">{{ 'api_key_details' | translate }}</p>
            </div>
            <div class="col-lg-4 col-md-8 text-right p-0">
                <div class="custom-search">
                    <input
                        type="text"
                        pInputText
                        #searchInput
                        [(ngModel)]="apiKeySearch"
                        placeholder="Search by Name, Role"
                        class="{{ apiKeySearch ? 'highlight' : '' }}"
                        class="w-100"
                    />
                </div>
            </div>
        </div>

        <div class="header-details row justify-content-between align-items-center">
            <div class="header-inner col-lg-9 col-md-6 p-0">
                <p-dropdown
                    [options]="FilterTypeList"
                    optionLabel="org_type"
                    optionValue="org_type"
                    [(ngModel)]="customerType"
                    scrollHeight="225px"
                    [showClear]="true"
                    placeholder="Customer Type"
                    styleClass="round-border mr-2 {{ customerType ? 'highlight' : '' }}"
                >
                </p-dropdown>
                <p-calendar
                    styleClass="only-icon"
                    [(ngModel)]="rangeDates"
                    [showIcon]="true"
                    selectionMode="range"
                    dateFormat="dd.mm.yy"
                    (onClose)="filterCall()"
                    [readonlyInput]="true"
                    [showButtonBar]="true"
                    placeholder="{{ globals.languageJson?.date_range }}"
                    styleClass="round-border"
                >
                </p-calendar>
            </div>
            <div class="col-lg-3 col-md-6 p-0">
                <div class="d-inline">
                    <p-dropdown
                        [options]="displayArray"
                        optionLabel="label"
                        optionValue="value"
                        [(ngModel)]="perPage"
                        scrollHeight="225px"
                        [showClear]="true"
                        placeholder="Display"
                        styleClass="round-border d-none d-sm-none d-md-flex float-right {{
                            perPage ? 'highlight' : ''
                        }}"
                    >
                    </p-dropdown>
                </div>
            </div>
        </div>

        <div class="api-requests-tabs mt-32">
            <p-tabView styleClass="pb-3 pb-md-4" [(activeIndex)]="selectedTab" (onChange)="handleChange($event)">
                <div class="api-requests-tabs mt-45">
                    <p-tabView [(activeIndex)]="selectedTab" (onChange)="handleChange($event)">
                        <p-tabPanel header="API Key Requests">
                            <app-api-key-requests
                                *ngIf="isApiRequestPage"
                                [searchRequestId]="KeySearch"
                                [filterData]="customerType"
                                [dateRange]="rangeDates"
                                [perPage]="perPage"
                                (filterType)="setFilterData($event)"
                            ></app-api-key-requests>
                        </p-tabPanel>
                        <p-tabPanel header="Generated Keys">
                            <app-generated-keys
                                *ngIf="!isApiRequestPage"
                                [searchRequestId]="KeySearch"
                                [filterData]="customerType"
                                [dateRange]="rangeDates"
                                [perPage]="perPage"
                                (filterType)="setFilterData($event)"
                            ></app-generated-keys>
                        </p-tabPanel>
                    </p-tabView>
                </div>
            </p-tabView>
        </div>
    </section>
</div>
