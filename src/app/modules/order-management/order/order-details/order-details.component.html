<ng-container *ngIf="order?.status !== OrderStatus.Placed; else confirmationDetails">
    <div class="border-ebebeb border-mobile tabs mx-0 pr-0 mt-3 mt-md-0 mb-4 mb-md-0">
        <ul class="nav nav-pills mb-3 w-100" id="pills-tab" role="tablist">
            <li class="nav-item" (click)="showDetails = true">
                <a class="nav-link active" id="pills-details-tab" data-toggle="pill" href="#pills-details"
                    #detailsTabLink role="tab" aria-controls="pills-details" aria-selected="true">{{ 'order_details' | translate}}</a>
            </li>
            <li class="nav-item" *ngIf="order?.orderType === OrderType.Booked" (click)="showDetails = false">
                <a class="nav-link" id="pills-details-tab" data-toggle="pill" href="#pills-documents" role="tab"
                    aria-controls="pills-details" aria-selected="true">{{ 'documents' | translate }}</a>
            </li>
            <li class="nav-item" (click)="showDetails = false">
                <a class="nav-link" id="pills-grade-tab" data-toggle="pill" href="#pills-grade" role="tab"
                    aria-controls="pills-grade" aria-selected="false">{{ 'grade_info' | translate }}</a>
            </li>
        </ul>
        <div class="pull-right ml-auto problem-text" id="have-a-problem-web" *ngIf="
          globals.permissions['sourcing-management'] &&
          globals.permissions['sourcing-management'].manage
      ">
            <button type="button" class="btn-raised">
                {{ 'have_a_problem' | translate }}
            </button>
        </div>

        <div class="tab-content mt-md-4" id="pills-tabContent">
            <div class="tab-pane fade show active" id="pills-details" role="tabpanel"
                aria-labelledby="pills-details-tab">
                <app-lot-details [lot]="order"></app-lot-details>
            </div>

            <div class="tab-pane fade" id="pills-documents" role="tabpanel" aria-labelledby="pills-documents-tab">
                <app-documents></app-documents>
            </div>

            <div class="tab-pane fade" id="pills-grade" role="tabpanel" aria-labelledby="pills-grade-tab">
                <app-grade-info [harvestId]="order?.harvestId"></app-grade-info>
            </div>
        </div>
    </div>

    <div class="border-ebebeb m-0 mt-md-3" *ngIf="showDetails">
        <div class="row pb-md-7 flex-column-reverse flex-md-row">
            <div class="col-lg-7 col-md-7 col-sm-12 pr-lg-5 bulk-details-content">
                <app-bulk-details *ngIf="order?.orderType === OrderType.Prebook" [bulk]="bulk$ | async">
                </app-bulk-details>
                <app-availability-details *ngIf="order?.orderType !== OrderType.Prebook" [bulk]="bulk$ | async">
                </app-availability-details>
            </div>

            <div class="col-lg-5 col-md-5 col-sm-12 pl-lg-4 mt-3 mt-md-0 payment-status-content mb-15">
                <app-order-payment-status [order]="order"></app-order-payment-status>
            </div>
        </div>
    </div>
</ng-container>

<ng-template #confirmationDetails>
    <div class="border-ebebeb pr-0">
        <div class="fnt-bold fnt-18 text-black334">{{ 'order_details' | translate}}</div>
        <app-lot-details [lot]="order"></app-lot-details>
    </div>

    <div class="border-ebebeb mt-3">
        <div class="fnt-bold fnt-18 text-black334">{{ 'delivery_details' | translate }}</div>
        <app-roaster-details [ownerName]="roaster?.ownerName" [rating]="roaster?.rating"
            [companyImageThumbnailUrl]="roaster?.companyImageThumbnailUrl"></app-roaster-details>
        <app-delivery-address [orderConfirmation]="true"></app-delivery-address>
    </div>
</ng-template>