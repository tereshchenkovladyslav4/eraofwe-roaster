<app-loading *ngIf="loading"></app-loading>
<div class="main-block" *ngIf="!loading">
    <div
        class="back-page mt-1 mt-lg-3 pb-35 pb-lg-2 w-fit-content"
        routerLink="/people/customer-management"
        [queryParams]="{ tab: orgIndex }"
    >
        <a>
            <span>{{ 'back' | translate }}</span>
        </a>
    </div>
    <div class="pt-4">
        <app-customer-info [data]="portalDetails"></app-customer-info>
    </div>
    <div class="pt-3 pt-md-4 pt-lg-45">
        <app-customer-contact-info [data]="portalDetails" [mobileView]="isMobile$ | async"></app-customer-contact-info>
    </div>

    <div class="row gutter-16 mt-4 mt-md-45" *ngIf="type === 'mr'">
        <div class="px-2 w-mob-100">
            <div class="total-card-wrapper border-main br-4 py-3 py-md-4 py-lg-45">
                <p class="fnt-18 fw-m text-clr588 lh-129 lh-md-normal mb-3 px-3 px-md-4">
                    {{ 'total_team_members' | translate }}
                </p>
                <p class="fnt-40 fnt-md-32 fw-b text-clr334 lh-1.25 lh-md-normal mb-0 px-3 px-md-4">
                    {{ portalDetails?.member_count || 0 }}
                </p>
            </div>
        </div>
        <div class="px-2 flex-1">
            <div class="border-md-main br-md-4 d-flex flex-wrap p-3 p-md-4 py-lg-45">
                <p class="w-100 fnt-16 fw-b lh-125 text-clr334 mt-2 mb-3 d-block d-md-none">
                    {{ 'roastery_capabilities' | translate }}
                </p>
                <div>
                    <p class="fnt-14 fnt-md-18 fw-m lh-129 lh-md-normal text-clr588 mb-3">
                        {{ 'roaster_capacity' | translate }}
                    </p>
                    <p class="fnt-28 fnt-md-32 fw-b lh-125 lh-md-normal text-clr334 mb-0">
                        {{ portalDetails?.capacity }} {{ portalDetails?.capacity_unit || 'Kg' }}
                    </p>
                </div>
                <p-divider layout="vertical" styleClass="mx-25 ml-md-4 mr-md-3"></p-divider>
                <div class="flex-1">
                    <ul class="flo-list w-100 pb-2 pb-md-3 pl-0" *ngIf="portalDetails?.capabilities">
                        <div class="flo-item-container" *ngFor="let c of capabilities">
                            <div class="flo-item fw-m fnt-12 lh-1 text-clr588">&#9679;&nbsp;{{ c }}</div>
                        </div>
                    </ul>
                    <p class="fnt-14 fnt-md-16 fw-m lh-157 lh-md-normal text-clr334 mb-0">
                        We are known for our three main blends Caf√© Blend, Mocha Java and Black Gold.
                    </p>
                </div>
            </div>
        </div>
    </div>
    <p-divider type="dashed" styleClass="my-0 d-block d-md-none" *ngIf="type === 'mr'"></p-divider>

    <div class="mt-4 mt-md-45" *ngIf="type === 'mr'">
        <app-certificates [data]="certificates"></app-certificates>
    </div>
    <div class="mt-4 mt-md-45">
        <app-contacts-list [data]="topContacts" [organizationType]="orgType"></app-contacts-list>
    </div>
    <div class="pt-lg-4" *ngIf="type === 'hrc'">
        <app-customer-management-table
            [sortedMainData]="partnersList"
            customerType="hrc"
            [isLoading]="isLoading"
            [isPartners]="true"
        >
        </app-customer-management-table>
    </div>
</div>
