<div class="total-loader" *ngIf="customerActive != 1">
    <img class="loader-gif-sub" src="/assets/images/loader.gif" />
</div>
<div *ngIf="customerActive == 1">
    <div class="main-block">
        <div class="d-flex justify-content-between">
            <div class="mb-4">
                <p-breadcrumb [model]="navItems" [home]="selectedNav"></p-breadcrumb>
            </div>
            <div class="col-md-6 col-lg-4 px-0 flex-1 ml-md-3 web-farm">
                <span class="custom-search">
                    <input
                        type="text"
                        pInputText
                        class="w-100 {{ searchTerm ? 'highlight' : '' }}"
                        [(ngModel)]="searchTerm"
                        placeholder="{{ 'search_name_role' | translate }}"
                    />
                </span>
            </div>
        </div>

        <section class="social-media pt-lg-3">
            <div class="col-lg-12 col-md-12 col-12 px-0">
                <h6 class="fnt-muli fnt-bold fnt-18 text-clr334 mb-3">{{ 'customer_management' | translate }}</h6>
                <div class="row mx-0 web-farm">
                    <div class="d-flex justify-content-between w-100 web-farm">
                        <div>
                            <p-dropdown
                                id="select-table-customer"
                                [options]="USER_STSTUS_ITEMS"
                                [(ngModel)]="selectedStatus"
                                scrollHeight="225px"
                                (onChange)="filterStatus()"
                                [showClear]="true"
                                placeholder="Status"
                                styleClass="round-border mr-25 mb-25 mb-md-4"
                            ></p-dropdown>
                        </div>
                        <div>
                            <button type="submit" class="btn-raised" routerLink="/features/onboard-customers">
                                Invite new customer
                            </button>
                        </div>
                    </div>
                </div>
                <div class="mobile-farm">
                    <div>
                        <button type="submit" class="btn-raised w-100" routerLink="/features/onboard-customers">
                            Invite new customer
                        </button>
                    </div>

                    <div class="mx-2 pt-4">
                        <span class="custom-search">
                            <input
                                type="text"
                                pInputText
                                class="w-100 {{ searchTerm ? 'highlight' : '' }}"
                                [(ngModel)]="searchTerm"
                                placeholder="{{ 'search_name_role' | translate }}"
                            />
                        </span>
                    </div>

                    <div class="mx-2 pt-3 pb-2">
                        <p-dropdown
                            id="select-table-customer"
                            [options]="USER_STSTUS_ITEMS"
                            [(ngModel)]="selectedStatus"
                            scrollHeight="225px"
                            (onChange)="filterStatus()"
                            [showClear]="true"
                            placeholder="Status"
                            styleClass="round-border mr-25 mb-25 mb-md-4"
                        ></p-dropdown>
                    </div>
                </div>

                <div class="col-lg-12 col-md-12 px-0" id="agreements-nav">
                    <p-tabView class="toggle" (onChange)="onTabChange($event)" [(activeIndex)]="selectedTab">
                        <p-tabPanel header="{{ 'micro_roasters' | translate }}">
                            <app-customer-management-table
                                *ngIf="customerType === OrgType.MICRO_ROASTER"
                                [searchTerm]="searchTerm"
                                [sortedMainData]="sortedMainData"
                                [customerType]="customerType"
                            >
                            </app-customer-management-table>
                        </p-tabPanel>
                        <p-tabPanel header="{{ 'roasted_coffee_customers' | translate }}">
                            <app-customer-management-table
                                *ngIf="customerType === OrgType.HORECA"
                                [searchTerm]="searchTerm"
                                [sortedMainData]="sortedMainData"
                                [customerType]="customerType"
                            >
                            </app-customer-management-table>
                        </p-tabPanel>
                        <p-tabPanel header="{{ 'invited_customers' | translate }}">
                            <app-customer-management-table
                                *ngIf="!customerType"
                                [searchTerm]="searchTerm"
                                [sortedMainData]="sortedMainData"
                            >
                            </app-customer-management-table>
                        </p-tabPanel>
                    </p-tabView>
                </div>
                <app-loading *ngIf="isLoading"></app-loading>
                <div class="pt-3 pt-md-4 text-center">
                    <p-paginator
                        [rows]="10"
                        [totalRecords]="totalRecords"
                        (onPageChange)="paginate($event)"
                    ></p-paginator>
                </div>
            </div>
        </section>
    </div>
</div>
