<div class="estate-table web-farm pt-4">
    <p-table
        id="sales-table"
        [value]="sortedMainData | filter: searchTerm | filter: estatetermOrigin"
        sortMode="multiple"
    >
        <ng-template pTemplate="header">
            <tr>
                <th pSortableColumn="name_customer" class="pl-4 ml-3 cust-width">
                    {{
                        customerType === 'micro-roasters'
                            ? globals.languageJson?.name_customer
                            : globals.languageJson?.horeca_name
                    }}
                    <p-sortIcon field="name_customer"> </p-sortIcon>
                </th>
                <th pSortableColumn="created_on">
                    {{ globals.languageJson?.created_on }} <p-sortIcon field="created_on"> </p-sortIcon>
                </th>
                <th pSortableColumn="status">
                    {{ globals.languageJson?.status }} <p-sortIcon field="status"></p-sortIcon>
                </th>
                <th pSortableColumn="discount_percentage">
                    Discount % <p-sortIcon field="discount_percentage"></p-sortIcon>
                </th>
                <th pSortableColumn="active_users">
                    {{ globals.languageJson?.active_users }} <p-sortIcon field="active_users"> </p-sortIcon>
                </th>
                <th pSortableColumn="actions">
                    {{ globals.languageJson?.actions }} <p-sortIcon field="actions"> </p-sortIcon>
                </th>
                <th style="width: 5%"></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
            <tr>
                <td class="fnt-14">{{ item.name }}</td>
                <td class="fnt-14">
                    {{
                        customerType === 'micro-roasters'
                            ? (item.founded_on | date: 'M/d/yy, h:mm a')
                            : (item.created_at | date: 'M/d/yy, h:mm a')
                    }}
                </td>
                <td class="fnt-14">
                    <span *ngIf="item.status === 'PENDING'">{{ item.status }}</span>
                    <span *ngIf="item.status === 'ACTIVE'" class="active"><li>Active</li></span>
                    <span *ngIf="item.status === 'DISABLED'" class="disabled"><li>Disabled</li></span>
                </td>
                <td class="fnt-14">{{ item.discount_percentage }}</td>
                <td class="fnt-14">
                    {{ customerType === 'micro-roasters' ? item.total_employees : item.active_users }}
                </td>
                <td class="view-listing" (click)="shareDetails(item)">View Details</td>
                <td id="sales-contract-popup">
                    <a
                        class="menu-arrow"
                        [popover]="poplistTemplate"
                        placement="left"
                        [outsideClick]="true"
                        #pop="bs-popover"
                    >
                        <p><img class="ellipse-image" src="assets/images/more-opns-file.png" alt="" /></p>
                    </a>
                    <ng-template #poplistTemplate id="{{ item.id }}">
                        <div id="popover-mobile-content">
                            <ul class="list-group custom-popover">
                                <!-- <li class="list-group-item"> <a class="pointer-item" (click)="pop.hide();">Download </a></li>
                                        <li class="list-group-item"><a class="pointer-item" (click)="pop.hide();">Pin</a></li>
                                        <li class="list-group-item"><a class="pointer-item" (click)="pop.hide();">Rename</a></li>
                                        <li class="list-group-item"><a class="pointer-item" (click)="pop.hide();">Comment</a></li> -->
                                <!-- <li class="list-group-item" *ngIf="item.status != 'PENDING'"><a class="pointer-item" (click)="deleteMicroRoaster(item.id);pop.hide();">Delete</a></li> -->
                                <li class="list-group-item">
                                    <a class="pointer-item" (click)="pop.hide(); customer.stimulatedLogin(item.id)"
                                        >Simulated login</a
                                    >
                                </li>
                            </ul>
                        </div>
                    </ng-template>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>
